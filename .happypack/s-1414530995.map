{"version":3,"sources":["node_modules/@ctrip/crnweb/src/react-native/components/ScrollView/index.web.js"],"names":["_cw_scale","Dimensions","get","scale","noop","globalMoving","BOUNCETIME","PAGEINGTIME","SCROLLTO_DURATION","SCROLLMOVE_THRESHOLD","SCROLLMOVE_TIME","INDICATOR_WIDTH","INDICATOR_MIN_SHOW_LENGTH","INDICATOR_MIN_SHOW_WIDTH","INDICATOR_GAP","INDICATOR_GAP_EDGE","INDICATOR_OPACITY","commonTransform","global","document","body","style","isiPhoneOrOPPOR9","iphone","navigator","userAgent","match","OPPOR9","styles","StyleSheet","create","scrollView","position","flex","maxHeight","overflow","transformStyle","touchAction","zIndex","scroller","transitionProperty","transform","translateX","translateY","translateZ","scrollerHorizontal","alignSelf","flexDirection","refreshControl","left","right","indicator","borderWidth","borderColor","borderRadius","backgroundColor","opacity","width","height","indicatorHorizontal","bottom","indicatorVertical","top","stickyWrapper","_vendor","_elementStyle","createElement","vendors","i","l","length","substr","_prefixStyle","charAt","toUpperCase","utils","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","getTime","Date","now","ease","quadratic","fn","k","circular","Math","sqrt","back","b","bounce","elastic","f","pow","sin","PI","momentum","current","start","time","lowerMargin","wrapperSize","deceleration","distance","speed","abs","destination","duration","undefined","round","getDeceleration","toFixed","isNaN","ScrollView","props","state","isRefreshing","isLoading","refreshResult","stickyItemIndex","indicatorVerticalHeight","indicatorHorizontalWidth","contentOffset","x","y","stateUnlockDelay","React","getFrameSpeed","frameSpeed","min","curPage","curAnimation","animationIdx","_updateByProps","isAnimating","scrollerWidth","scrollerHeight","minScrollX","minScrollY","maxScrollX","maxScrollY","alwaysBounceHorizontal","horizontal","alwaysBounceVertical","bounces","pagingEnabled","showsVerticalScrollIndicator","showsHorizontalScrollIndicator","decelerationRate","contentInset","_panResponder","PanResponder","onStartShouldSetPanResponder","_onStartShouldSetPanResponder","bind","onStartShouldSetPanResponderCapture","_onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","_onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","_onMoveShouldSetPanResponderCapture","onPanResponderGrant","_onPanResponderGrant","onPanResponderStart","_onPanResponderStart","onPanResponderMove","_onPanResponderMove","onPanResponderRelease","_onPanResponderRelease","onPanResponderTerminationRequest","_onPanResponderTerminationRequest","onPanResponderTerminate","_onPanResponderTerminate","node","id","tagName","_scrollHeightHotFix","parentElement","uIdx","wrapper","ReactDOM","findDOMNode","wrapperRef","scrollerRef","loadControl","loadControlRef","indicatorVerticalRef","indicatorHorizontalRef","stickyWrapperDOM","stickyWrapperRef","stickyHeaderIndices","forEach","item","newItem","itemDOM","childNodes","push","itemIndex","itemOffset","offsetTop","itemHeight","offsetHeight","itemStickState","stickyItem","index","transformValue","_scrollTo","nextProps","prevProps","scrollEnabled","e","gestureState","point","nativeEvent","touches","isMoving","distX","distY","directionX","directionY","startTime","startX","startY","pointX","pageX","pointY","pageY","updateCurPage","_toggleIndicator","_execEvent","timestamp","deltaX","deltaY","newX","newY","absDistX","absDistY","endTime","currentApp","isScrolling","_checkDismissMode","newPageScrollerX","wrapperWidth","newPageScrollerY","wrapperHeight","_translate","preventDefault","onResponderRelease","_checkShouldPersistTaps","momentumX","momentumY","easing","refreshControlHeight","startRefreshing","loadControlHeight","noPullUpToRefresh","startLoading","_resetPosition","vx","per","newPage","vy","max","keyboardShouldPersistTaps","direction","allow","offset","scrollTo","eventType","apply","contentSize","velocity","layoutMeasurement","keyboardDismissMode","TextInputState","blur","currentFocus","ele","target","focusEle","inputs","getElementsByTagName","clientWidth","clientHeight","scrollWidth","scrollHeight","indicatorHeight","ableShowsVerticalScrollIndicator","indicatorMaxLength","floor","setState","indicatorWidth","ableShowsHorizontalScrollIndicator","indicatorMaxWidth","needrefresh","isCheckKeyborad","flag","_checkIfInputInScrollView","scrollIntoView","type","options","callback","animated","_transitionTime","_transitionTimingFunction","_animate","lastHeight","stickyState","durationProp","isBadAndroid","self","rAF","_this","lockUpdater","clearTimeout","_uIdxClock","setTimeout","unlockUpdater","indicesLength","nextItem","prevItem","_getStickyState","fastdom","mutate","refreshControlRef","onScroll","idx","ret","destX","destY","easingFn","_getAnimationIdx","step","cancelAnimationFrame","_isCurrentAnimationIdx","requestAnimationFrame","fromResponder","onRefresh","config","result","onLoad","scrollProps","cloneElement","ref","ins","indexedControl","indexedControlHeight","indexedControlRef","loadControlChild","stickIndex","isRenderHeader","inheritsType","children","panHandlers","_refresh","contentContainerStyle","endFillColor","onContentSizeChange","Component","defaultProps","displayName"],"mappings":"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","file":"index.web.js","sourceRoot":"/Users/jane/Documents/HaloAI","sourcesContent":["/*\n * @providesModule ScrollView\n */\n'use strict';\nimport React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport StyleSheet from './../../apis/StyleSheet/StyleSheet.web';\nimport PanResponder from './../../apis/PanResponder/index.web';\nimport View from './../../components/View/View.web';\nimport Resizable from './Resizable';\nimport {TextInputState} from './../../components/TextInput/index.web';\n\nimport NativeMethodsWrapper from './../../modules/wrapper/NativeMethodsWrapper/index.web';\n\nimport fastdom from 'fastdom';\n\nimport deepDiffer from './../../modules/react-lib/deepDiffer';\nimport Dimensions from './../../apis/Dimensions/index.web';\n\nlet _cw_scale = Dimensions.get('window').scale;\n\nlet noop = function () {};\nlet globalMoving = false;\n\nconst BOUNCETIME = 600;\nconst PAGEINGTIME = 300;\nconst SCROLLTO_DURATION = 300;\nconst SCROLLMOVE_THRESHOLD = 8;\nconst SCROLLMOVE_TIME = 300;\nconst INDICATOR_WIDTH = 2.5;\nconst INDICATOR_MIN_SHOW_LENGTH = 40;\nconst INDICATOR_MIN_SHOW_WIDTH = 40;\nconst INDICATOR_GAP = 6;\nconst INDICATOR_GAP_EDGE = 3;\nconst INDICATOR_OPACITY = 0.4;\nlet commonTransform=\"transform\";\nif(global.document){\n    commonTransform = 'transform' in global.document.body.style ? 'transform' : 'webkitTransform';\n}\n\n\n// let isBaiduBrowser = global.navigator.userAgent.indexOf('baidubrowser') > -1;//检测百度浏览器\n//兼容iphone maxHeight,OOPO R9与iphone类似，会将flex:1理解为flex:1 1 0px,并且当height:100%时无法撑开子元素的内容\nlet isiPhoneOrOPPOR9=false;\nif(global.document){\n    isiPhoneOrOPPOR9 = (function(){\n        let iphone = navigator.userAgent.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n        let OPPOR9 = navigator.userAgent.match(/(OPPO\\sR9m)/);\n        return !!(iphone || OPPOR9);\n    }());\n}\n\n// let flexVal = \"1\";\n// if(isiPhoneOrOPPOR9){\n//     //hotfix for scroll compatibility\n//     flexVal = \"1 1 auto\";\n// }\nconst styles = StyleSheet.create({\n    //fix:ios系统浏览器对touch事件响应延迟(见Issue #390)，原因是层级太多导致计算量太大，\n    // 此处的解决方案是删掉了ScrollView最外层的Base层。\n    // scrollBase: {\n    //     flex: \"1 1 auto\",\n    //     overflow: 'hidden',\n    //     maxHeight:\"100%\",\n    //     transformStyle: 'preserve-3d',\n    //     touchAction: 'none'    //fix:浏览器的event.cancelable=false时，e.preventDefault失效以至无法取消浏览器的默认行为，导致页面无法滚动或滚动卡顿（见Issue #360）。\n    // },\n    scrollView: {\n        position: 'relative',\n//\t\tborder: '10px solid red',\n        flex: \"1 1 auto\",\n        maxHeight:\"100%\",\n        overflow: 'hidden',\n        transformStyle: 'preserve-3d',\n\t    touchAction: 'none',    //fix:浏览器的event.cancelable=false时，e.preventDefault失效以至无法取消浏览器的默认行为，导致页面无法滚动或滚动卡顿（见Issue #360）。\n        zIndex:0   //修复stickyWrapper的zIndex:2元素在OPPO R9自带浏览器中覆盖ScrollView同级元素的bug。\n    },\n//    scrollViewInset: {\n//        position: 'absolute',\n//        left: 0,\n//        right: 0,\n//        top: 0,\n//        bottom: 0,\n//        overflow: 'hidden',\n//        zIndex:1,\n//    },\n    scroller: {\n        transitionProperty: \"transform\",\n        transform: [{\n            translateX: 0\n        }, {\n            translateY: 0\n        }, {\n            translateZ: 0\n        }],\n        position: 'relative'\n    },\n    scrollerHorizontal: {\n        alignSelf: 'flex-start',\n        flexDirection: 'row',\n    },\n\n    refreshControl: {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n    },\n\n    indicator: {\n        position: 'absolute',\n        borderWidth: 1,\n        borderColor: '#444',\n        borderRadius: 1,\n        backgroundColor: '#444',\n        opacity: 0,\n        width: 0,\n        height: 0,\n        transform: [{\n            translateX: 0\n        }, {\n            translateY: 0\n        }, {\n            translateZ: 0\n        }],\n        zIndex: 3,\n    },\n\n    indicatorHorizontal: {\n        height: INDICATOR_WIDTH,\n        bottom: INDICATOR_GAP_EDGE,\n        left: INDICATOR_GAP,\n    },\n\n    indicatorVertical: {\n        width: INDICATOR_WIDTH,\n        right: INDICATOR_GAP_EDGE,\n        top: INDICATOR_GAP,\n    },\n\n    stickyWrapper: {\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        right: 0,\n        zIndex: 2,\n    }\n});\n\nlet _vendor='';\nif(global.document){\n    let _elementStyle = global.document.createElement('div').style;\n    _vendor = (function () {\n        let vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\n            transform,\n            i = 0,\n            l = vendors.length;\n\n        for ( ; i < l; i++ ) {\n            transform = vendors[i] + 'ransform';\n            if ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);\n        }\n\n        return false;\n    })();\n}\n\n\nfunction _prefixStyle (style) {\n    if ( _vendor === false ) return false;\n    if ( _vendor === '' ) return style;\n    return _vendor + style.charAt(0).toUpperCase() + style.substr(1);\n}\n\nconst utils = {\n    style:{\n        transform: _prefixStyle('transform'),\n        transitionTimingFunction: _prefixStyle('transitionTimingFunction'),\n        transitionDuration: _prefixStyle('transitionDuration'),\n        transitionDelay: _prefixStyle('transitionDelay'),\n        transformOrigin: _prefixStyle('transformOrigin'),\n        touchAction: _prefixStyle('touchAction')\n    },\n    getTime: Date.now || function getTime() {\n        return new Date().getTime();\n    },\n    ease: {\n        quadratic: {\n            style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n            fn: function (k) {\n                return k * (2 - k);\n            }\n        },\n        circular: {\n            style: 'cubic-bezier(0.1, 0.57, 0.1, 1)', // Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\n            fn: function (k) {\n                return Math.sqrt(1 - (--k * k));\n            }\n        },\n        back: {\n            style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n            fn: function (k) {\n                let b = 4;\n                return (k = k - 1) * k * ((b + 1) * k + b) + 1;\n            }\n        },\n        bounce: {\n            style: '',\n            fn: function (k) {\n                if ((k /= 1) < (1 / 2.75)) {\n                    return 7.5625 * k * k;\n                } else if (k < (2 / 2.75)) {\n                    return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n                } else if (k < (2.5 / 2.75)) {\n                    return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n                } else {\n                    return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n                }\n            }\n        },\n        elastic: {\n            style: '',\n            fn: function (k) {\n                let f = 0.22,\n                    e = 0.4;\n\n                if (k === 0) {\n                    return 0;\n                }\n                if (k === 1) {\n                    return 1;\n                }\n\n                return (e * Math.pow(2, -10 * k) * Math.sin((k - f / 4) * (2 * Math.PI) / f) + 1);\n            }\n        }\n    },\n    momentum(current, start, time, lowerMargin, wrapperSize, deceleration) {\n        let distance = current - start,\n            speed = Math.abs(distance) / time,\n            destination,\n            duration;\n\n        deceleration = deceleration === undefined ? 0.006 : deceleration;\n\n        destination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);\n        duration = speed / deceleration;\n\n        if (destination < lowerMargin) {\n            destination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;\n            distance = Math.abs(destination - current);\n            duration = distance / speed;\n        } else if (destination > 0) {\n            destination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\n            distance = Math.abs(current) + destination;\n            duration = distance / speed;\n        }\n\n        return {\n            destination: Math.round(destination),\n            duration: duration\n        };\n    },\n    /*\n     * https://facebook.github.io/react-native/releases/0.31/docs/scrollview.html\n     * react-native标准是.998\n     * */\n    getDeceleration(deceleration) {\n        const SLOW = 0.94;\n        const NORMAL = 0.994;\n        const FAST = 0.9994;\n        if (typeof deceleration === 'string') {\n            if (deceleration === 'slow') {\n                return (1 - SLOW).toFixed(4);\n            }\n            if (deceleration === 'fast') {\n                return (1 - FAST).toFixed(4);\n            }\n            if (deceleration === 'normal') {\n                return (1 - NORMAL).toFixed(4);\n            }\n        }\n        deceleration=isNaN(deceleration)?0:deceleration;\n        return (1 - deceleration).toFixed(4);\n    },\n};\n\n/**\n * @component ScrollView\n * @version >=v1.4.0\n * @example ./ScrollView.js[1-72]\n * @description 包含了平台的 ScrollView 组件，并集成了触摸锁定的“响应者”系统\n *\n * - 需要记住 ScrollView 必须有一个确定的高度才能正常工作。因为其本质是将一系列高度不确定的子组件，放进一个高度确定的容器，然后通过滚动来进行操作。\n * - 要让 ScrollView 高度确定，要么直接给它设置高度（不推荐），要么确定其所有的父容器都已经绑定了高度。\n * - 在视图栈中的任一视图中忘记使用 `{flex:1}` 都会导致错误，你可以通过元素审查器轻松地定位 bug。\n * - 如果你想使用嵌套，内层元素会在滚动方面没有滚动余地时释放控制权，但注意always*系列为true的情况下也会被视为有滚动余地\n *\n * ![ScrollView](./images/component/ScrollView.gif)\n */\n\n/**\n * 本组件是一个仿照IScroll实现的滚动组件\n * View结构\n * <View>\n * <View> --- 最外层View  position:relative,flex:1 ScrollView.style\n *    <Scroller> --- 内层滚动  transform，absolute，props.contentContainerStyle\n *      {refreshControl}\n *      {this.props.children}\n *      {loadControl}\n *    </Scroller>\n *    <View> --- 横向滚动条\n *    <View> --- 纵向滚动条\n * </View>\n * 1 .UI的改变有两类，一类是滚动时触发，包括scroller，stickyItem和进度条的translate和opacity，因需要频繁改变，不纳入react不需render。另一类是常规的纳入React。\n * 2. 为解决\n *    a.外部的不通过render的改变wrapper的大小，比如全屏，华为荣耀6收起或打开虚拟home栏，以及业务线中其他各种情况。\n *    b.Scroller的size改变时，比如内部按了一个按键，出来一个新的东西。\n *   以上两个refresh问题，Wrapper和Scroller通过Resizable组件实现。\n *   Resizable可监视div中的size事件，它增加了一个div标签（含有两个子div）和一个绑定在组件中的onScroll的事件，但不会真的在手指滚动时触发，只会在onsize时触发一到两次，所以这个性能方面还好。\n * 3. 本组件的Refresh是隐藏在父元素的上方，下拉时显示，但由于qrn的实现方法不同，导致含RefreshControl时，ScrollTo和监听事件的contentOffset.y多出了35，在scrollTo和_execEvent中进行处理。\n * 4. 关于sticky，有这么几种思路\n *    - 对sticky元素应用fixed或是absolute，显然不适合这个项目，因为容器套上了translate的套子\n *    - 对sticky元素应用translate，一开始就是这么写的，效率也还可以，但是套在ListView中，因为ListView不断的改变topPlaceHolder和bottomPlaceHolder的高度来控制可视区域，但渲染topPlaceHolder的height和更新sticky无法再同一帧中完成，在不修改ListView的情况下尝试其他方法。\n *    - 超出Scroller上定义一个stickyWrapper，钉在最上面，需要时更换里面的元素，效率可能没有上一中高，但是木有其他办法啊。\n */\n\nclass ScrollView extends Component {\n    static defaultProps = {\n        contentInset: {\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n        },\n        bounces: true,\n        horizontal: false,\n        showsVerticalScrollIndicator: false,\n        showsHorizontalScrollIndicator: false,\n        scrollEnabled: true,\n        pagingEnabled: false,\n        keyboardDismissMode: 'none',\n        keyboardShouldPersistTaps: false,\n        decelerationRate: 'normal',\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isRefreshing: false,\n            isLoading: false,\n            refreshResult: undefined,\n            stickyItemIndex: null,\n            indicatorVerticalHeight: 0,\n            indicatorHorizontalWidth: 0,\n\n        };\n        // this.contentOffset = {\n        //     x: 0,\n        //     y: 0\n        // }\n        this.contentOffset = {\n            x: this.props.contentOffset && this.props.contentOffset.x || 0,\n            y: this.props.contentOffset && this.props.contentOffset.y || 0\n        }\n\n        this.stateUnlockDelay = 100;\n        React.getFrameSpeed((frameSpeed)=> {\n            this.stateUnlockDelay = Math.min(100, frameSpeed * 2);\n        });\n        this.curPage = 0;\n        this.curAnimation = -1;\n        this.animationIdx = 0;\n        this._updateByProps(props);\n        this.isAnimating = false;\n\n        //修复百度浏览器取不到this问题（此问题仍未找到根因，此处初始化暂时修复BU问题 Issue #231）\n        this.scrollerWidth = 0;\n        this.scrollerHeight = 0;\n        this.minScrollX = 0;\n        this.minScrollY = 0;\n        this.maxScrollX = 0;\n        this.maxScrollY = 0;\n\n    }\n\n    _updateByProps(props) {\n        // 判断alwaysBounce\n        this.alwaysBounceHorizontal = props.alwaysBounceHorizontal !== undefined ? props.alwaysBounceHorizontal : props.horizontal;\n        this.alwaysBounceVertical = props.alwaysBounceVertical !== undefined ? props.alwaysBounceVertical : !props.horizontal;\n        if (!props.bounces) {\n            this.alwaysBounceHorizontal = false;\n            this.alwaysBounceVertical = false;\n        }\n\n        if (props.pagingEnabled) {\n            props.horizontal ? this.alwaysBounceVertical = false : this.alwaysBounceHorizontal = false;\n        }\n\n\n        // 判断滚动条是否显示\n        this.showsVerticalScrollIndicator = !props.horizontal ? props.showsVerticalScrollIndicator : false;\n        this.showsHorizontalScrollIndicator = props.horizontal ? props.showsHorizontalScrollIndicator : false;\n\n        //判断deceleration\n        this.deceleration = utils.getDeceleration(props.decelerationRate);\n\n        // 当前视图左上角坐标,defaultProps{0,0}\n        // contentOffset和contentInset绑定到this上，是为了兼容业务线直接调用的用法，实际上此接口不对外开放，可以省略\n        if (this.props.contentOffset != props.contentOffset) {\n            this.contentOffset = {\n                x: props.contentOffset.x,\n                y: props.contentOffset.y,\n            };\n        }\n        this.contentInset = Object.assign({}, props.contentInset);\n    }\n\n    componentWillMount() {\n        this._panResponder = PanResponder.create({\n            onStartShouldSetPanResponder: this._onStartShouldSetPanResponder.bind(this),\n            onStartShouldSetPanResponderCapture: this._onStartShouldSetPanResponderCapture.bind(this),\n            onMoveShouldSetPanResponder: this._onMoveShouldSetPanResponder.bind(this),\n            onMoveShouldSetPanResponderCapture: this._onMoveShouldSetPanResponderCapture.bind(this),\n            onPanResponderGrant: this._onPanResponderGrant.bind(this),\n            onPanResponderStart: this._onPanResponderStart.bind(this),\n            onPanResponderMove: this._onPanResponderMove.bind(this),\n            onPanResponderRelease: this._onPanResponderRelease.bind(this),\n            onPanResponderTerminationRequest: this._onPanResponderTerminationRequest.bind(this),\n            onPanResponderTerminate: this._onPanResponderTerminate.bind(this),\n\n        });\n    }\n    //兼容某些低端浏览器无法滚动、滑不到底\n    _scrollHeightHotFix(node){\n        if(node&&node.id!=\"main\"&&node.id!=\"rootTag\"&&node.tagName!=\"BODY\"){\n            if((node.style[\"flex\"]||node.style[\"webkitFlex\"]||node.style[\"webkitBoxFlex\"])&&(!node.style[\"height\"]&&!node.style[\"maxHeight\"])){\n                node.style[\"height\"]=\"100%\";\n            }\n            this._scrollHeightHotFix(node.parentElement);\n        }\n    }\n\n    componentDidMount() {\n        let props = this.props;\n        this.uIdx = null;\n        this.wrapper = ReactDOM.findDOMNode(this.wrapperRef);\n        this.scroller = ReactDOM.findDOMNode(this.scrollerRef);\n        // this.refreshControl = this.refreshControlRef;\n        this.loadControl = this.loadControlRef;\n\n        //hotfix for max-height\n        //let iphone = global.navigator.userAgent.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n        if(!isiPhoneOrOPPOR9){\n            //hotfix for scroll compatibility\n            this._scrollHeightHotFix(this.wrapper);\n        }\n\n        this.indicatorVertical = ReactDOM.findDOMNode(this.indicatorVerticalRef);\n        this.indicatorHorizontal = ReactDOM.findDOMNode(this.indicatorHorizontalRef);\n\n        this.stickyWrapperDOM = ReactDOM.findDOMNode(this.stickyWrapperRef);\n        // log('componentDidMount==wrapper,scroller',this.wrapper.scrollHeight,this.scroller.scrollHeight)\n        // 判断stickyHeaderIndices\n        this.stickyHeaderIndices = [];\n        if (props.stickyHeaderIndices && !props.horizontal) {\n            props.stickyHeaderIndices.forEach((item) => {\n                let newItem = props.refreshControl ? item + 1 : item;\n                let itemDOM = this.scroller.childNodes[newItem] || {};\n                this.stickyHeaderIndices.push({\n                    itemIndex: newItem,\n                    itemDOM: itemDOM,\n                    itemOffset: itemDOM.offsetTop,\n                    itemHeight: itemDOM.offsetHeight,\n                    itemStickState: null,\n                });\n            });\n\n            this.stickyItem = {\n                index: -1,\n                state: null,\n                transformValue: null,\n            }\n\n        }\n        this._scrollTo(-this.contentOffset.x, -this.contentOffset.y);\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this._updateByProps(nextProps);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        // 如果新的contentOffset不同，则更新\n        let props = this.props;\n        // this._scrollTo(-this.contentOffset.x, -this.contentOffset.y);\n        // 将DOM更新到this.stickyHeaderIndices的DOM里\n        if (deepDiffer(prevProps.stickyHeaderIndices, props.stickyHeaderIndices)) {\n            this.stickyHeaderIndices = [];\n\n            props.stickyHeaderIndices.forEach((item) => {\n                let newItem = props.refreshControl ? item + 1 : item;\n                let itemDOM = this.scroller.childNodes[newItem] || {};\n                this.stickyHeaderIndices.push({\n                    itemIndex: newItem,\n                    itemDOM: itemDOM,\n                    itemOffset: itemDOM.offsetTop,\n                    itemHeight: itemDOM.offsetHeight,\n                    itemStickState: null,\n                });\n            });\n        }\n    }\n\n    _onStartShouldSetPanResponderCapture(e) {\n        //return true时不会将手势交予子组件处理，多个ScrollView嵌套时，子ScrollView无法获得手势，因此return false。\n        return false;\n    }\n\n    _onStartShouldSetPanResponder(e) {\n        return this.props.scrollEnabled;\n    }\n\n    _onPanResponderStart(e) {\n\n    }\n\n    _onMoveShouldSetPanResponder(e) {\n        return (this.props.scrollEnabled && !globalMoving);\n    }\n\n    _onMoveShouldSetPanResponderCapture(e) {\n        //return true时不会将手势交予子组件处理，因此return false。\n        return false;\n    }\n\n    _onPanResponderGrant(e, gestureState) {\n        globalMoving = false;\n        let point = e.nativeEvent.touches[0];\n        // 重置数据\n        this.isMoving = false;\n        this.distX = 0;\n        this.distY = 0;\n        this.directionX = 0;\n        this.directionY = 0;\n\n        this.startTime = utils.getTime();\n        this.startX = this.x;\n        this.startY = this.y;\n\n        this.pointX = point.pageX;\n        this.pointY = point.pageY;\n\n        this.updateCurPage();\n\n        this._toggleIndicator(true);\n        this._execEvent('onScrollBeginDrag', gestureState);\n    }\n\n    _onPanResponderMove(e, gestureState) {\n\n\n        let timestamp = utils.getTime();\n\n        globalMoving = false;\n\n        let point = e.nativeEvent.touches[0],\n            deltaX = point.pageX - this.pointX,\n            deltaY = point.pageY - this.pointY,\n            newX, newY,\n            absDistX, absDistY;\n\n        this.pointX = point.pageX;\n        this.pointY = point.pageY;\n\n        this.distX += deltaX;\n        this.distY += deltaY;\n        absDistX = Math.abs(this.distX);\n        absDistY = Math.abs(this.distY);\n        // 移动距离大于10且距离上次相应结束大于300ms才相应\n        if (timestamp - this.endTime > SCROLLMOVE_TIME && (absDistX < SCROLLMOVE_THRESHOLD && absDistY < SCROLLMOVE_THRESHOLD)) {\n            return;\n        }\n        global.currentApp.isScrolling=true;\n        this.isMoving = true;\n        // 判断是否需要隐藏软键盘\n        this._checkDismissMode();\n\n        newX = this.x + deltaX;\n        newY = this.y + deltaY;\n        // 超出了范围，减少移动距离或是保持原来的位置\n        if (newX > this.minScrollX || newX < this.maxScrollX) {\n            newX = this.alwaysBounceHorizontal ? this.x + deltaX / 3 : newX > this.minScrollX ? this.minScrollX : this.maxScrollX;\n        }\n        if (newY > this.minScrollY || newY < this.maxScrollY) {\n            newY = this.alwaysBounceVertical ? this.y + deltaY / 3 : newY > this.minScrollY ? this.minScrollY : this.maxScrollY;\n        }\n\n        // ↑ → 为1\n        this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n        this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n        // 最多只能显示到上下一页\n        if (this.props.pagingEnabled && this.props.horizontal) {\n            let newPageScrollerX = -(this.curPage + this.directionX) * this.wrapperWidth;\n            if ((this.directionX < 0 && newX > newPageScrollerX) || (this.directionX > 0 && newX < newPageScrollerX)) {\n                newX = newPageScrollerX;\n            }\n        }\n        if (this.props.pagingEnabled && !this.props.horizontal) {\n            let newPageScrollerY = -(this.curPage + this.directionY) * this.wrapperHeight;\n            if ((this.directionY < 0 && newY > newPageScrollerY) || (this.directionY > 0 && newY < newPageScrollerY)) {\n                newY = newPageScrollerY;\n            }\n        }\n\n        if (this.x != newX || this.y != newY) {\n            this.curAnimation = -1;\n            //fix:水平的ScrollView在侧向滑动的时候，有上下轻微浮动 (Issue #422)\n            if(this.props.horizontal){\n                newY = this.y;\n            }\n            else{\n                newX = this.x;\n            }\n            this._translate(newX, newY);\n        }\n\n        // move时间过长时，relase后的速度依赖于最后的300ms\n        if (timestamp - this.startTime > SCROLLMOVE_TIME) {\n            this.startTime = timestamp;\n            this.startX = this.x;\n            this.startY = this.y;\n        }\n        this._execEvent('onScroll', gestureState);\n        //阻止浏览器默认滚动\n        e.preventDefault && e.preventDefault();\n        return true;\n    }\n\n    _onPanResponderRelease(e, gestureState) {\n        globalMoving = false;\n        this.props.onResponderRelease && this.props.onResponderRelease(e);\n        // this.props.onScrollEndDrag && this.props.onScrollEndDrag(e);\n        this._checkShouldPersistTaps(e);\n        let momentumX,\n            momentumY,\n            duration,\n            newX = Math.round(this.x),\n            newY = Math.round(this.y),\n            time = 0,\n            // point = e.nativeEvent.changedTouches[0],\n            easing;\n        this.endTime = utils.getTime();\n        duration = this.endTime - this.startTime;\n\n        this.isMoving = false;\n\n        // 触发refresh&load\n        if (this.props.refreshControl && !this.state.isRefreshing) {\n            if (!this.props.horizontal && newY > this.refreshControlHeight) {\n                this.startRefreshing(true);\n                return;\n            }\n        }\n\n        if (this.props.loadControl) {\n            if (!this.props.horizontal && newY < this.maxScrollY - this.loadControlHeight&&!this.props.noPullUpToRefresh) {\n                this.startLoading(true);\n                return;\n            }\n        }\n\n        // 已经超出边界的进行回弹\n        if (this._resetPosition(BOUNCETIME)) {\n            this._execEvent('onScrollEndDrag', gestureState);\n            return;\n        }\n\n        // 处理pagingEnabled情况\n        if (this.props.pagingEnabled) {\n            if (this.props.horizontal) {\n                let vx = (this.x - this.startX) / duration,\n                    per = Math.abs(newX) / this.wrapperWidth - this.curPage,\n                    directionX = vx > 0 ? -1 : vx < 0 ? 1 : 0;\n                let newPage = (directionX === this.directionX && (per > 0.35 || Math.abs(vx) > 0.4)) ? (this.curPage += this.directionX) : this.curPage;\n\n                this._execEvent('onScrollEndDrag', gestureState);\n                this._scrollTo(-newPage * this.wrapperWidth, newY, PAGEINGTIME, utils.ease.quadratic, ()=> {\n                    this._execEvent('onMomentumScrollEnd', gestureState);\n                });\n                return;\n            } else {\n                let vy = (this.y - this.startY) / duration,\n                    per = Math.abs(newY) / this.wrapperHeight - this.curPage,\n                    directionY = vy > 0 ? -1 : vy < 0 ? 1 : 0;\n                let newPage = (directionY === this.directionY && (per > 0.35 || Math.abs(vy) > 0.4)) ? this.curPage += this.directionY : this.curPage;\n                this._execEvent('onScrollEndDrag', gestureState);\n                this._scrollTo(newX, -newPage * this.wrapperHeight, PAGEINGTIME, utils.ease.quadratic, ()=> {\n                    this._execEvent('onMomentumScrollEnd', gestureState);\n                });\n                return;\n            }\n        }\n\n        // 移动到新地点\n        // this._scrollTo(newX, newY, 0);\n\n        this._execEvent('onScrollEndDrag', gestureState);\n\n        // 惯性滚动\n        //fix Issue #413中第二个问题：在onScrollEndDrag中调用scrollTo, _animate执行过程中会执行下面的惯性滚动，\n        // 从而导致scrollTo的结果被惯性滚动覆盖掉。故应加强惯性滚动的条件。\n        //条件1：newX与this.x，newY与this.y的等值判断是为了判断手势Release之后惯性滚动之前是否有其他滚动发生，\n        // 若有其他滚动发生，比如onScrollEndDrag中触发了滚动（滚动可带动画也可能不带动画），\n        // 那么this.x/this.y发生了变化，不应继续根据刚Release时的状态进行惯性滚动；\n        //条件2：_animate第一次step执行时this.x/this.y并未发生变化，故使用this.animating标识当前是否处于动画状态。\n        if (!this.isAnimating && newX === Math.round(this.x) && newY === Math.round(this.y) && duration < SCROLLMOVE_TIME) {\n            momentumX = this.props.horizontal ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.wrapperWidth, this.deceleration ) : {\n                    destination: newX,\n                    duration: 0\n                };\n            momentumY = !this.props.horizontal ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.wrapperHeight, this.deceleration) : {\n                    destination: newY,\n                    duration: 0\n                };\n            newX = momentumX.destination;\n            newY = momentumY.destination;\n            time = Math.max(momentumX.duration, momentumY.duration);\n        }\n        else{\n\t        newX = this.x;\n\t        newY = this.y;\n        }\n\n        if (newX !== this.x || newY !== this.y) {\n            if (newX > this.minScrollX || newX < this.maxScrollX) {\n                if (this.alwaysBounceHorizontal) {\n                    easing = utils.ease.quadratic;\n                } else {\n                    newX = newX > this.minScrollX ? this.minScrollX : this.maxScrollX;\n                }\n            }\n\n            if (newY > this.minScrollY || newY < this.maxScrollY) {\n                if (this.alwaysBounceVertical) {\n                    easing = utils.ease.quadratic;\n                } else {\n                    newY = newY > this.minScrollY ? this.minScrollY : this.maxScrollY;\n                }\n            }\n\n            this._execEvent('onMomentumScrollBegin', gestureState);\n            this._scrollTo(newX, newY, time, easing, ()=> {\n                this._execEvent('onMomentumScrollEnd', gestureState);\n            });\n            return;\n        }\n\n        this._execEvent('onScrollAnimationEnd', gestureState);\n        this._toggleIndicator(false);\n        return true;\n    }\n\n    _onPanResponderTerminationRequest(e, gestureState) {\n        globalMoving = false;\n        // 控制权的交出：移动方向没有滚动，或是有滚动且在本方向上滚动到底才会交出(在滚动方向的always* 为false)\n        // keyboardShouldPersistTaps 为true，不交出控制权，滚动视图不响应点击操作，键盘不会消失。\n        if (this.props.keyboardShouldPersistTaps) {\n            return false;\n        }\n        let point = e.nativeEvent,\n            deltaX = point.pageX - this.pointX,\n            deltaY = point.pageY - this.pointY,\n            directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0,\n            directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0,\n            direction = Math.abs(deltaY) > Math.abs(deltaX) ? 'v' : 'h',\n            allow = false;\n\n        (this.props.horizontal && direction === 'v' && !this.alwaysBounceVertical) && (allow = true);\n        (!this.props.horizontal && direction === 'h' && !this.alwaysBounceHorizontal ) && (allow = true);\n\n        if (this.props.horizontal && direction === 'h' && !this.alwaysBounceHorizontal) {\n            (directionX === 1 && this.x <= this.maxScrollX) && (allow = true);\n            (directionX === -1 && this.x >= this.minScrollX) && (allow = true);\n        }\n\n        if (!this.props.horizontal && direction === 'v' && !this.alwaysBounceVertical) {\n            (directionY === 1 && this.y <= this.maxScrollY) && (allow = true);\n            (directionY === -1 && this.y >= this.minScrollY) && (allow = true);\n        }\n        return allow;\n    }\n\n    _onPanResponderTerminate(e) {\n        //控制权交出后结束后归位\n        globalMoving = false;\n        if (this._resetPosition(BOUNCETIME)) {\n            return;\n        }\n    }\n\n    setPageWithoutAnimation(offset={x:0,y:0}) {\n//\t\tthis.curPage=0;\n        this.scrollTo({\n            x: offset.x,\n            y: offset.y\n        });\n    }\n\n    _execEvent(eventType, gestureState = {vx:0, vy:0}) {\n        // 参数为了和QRN保持一致\n        this.props[eventType] && this.props[eventType].apply(this, [{\n            nativeEvent: {\n                contentOffset: {\n                    x: -(this.x/_cw_scale),\n                    y: -((this.y + (this.props.refreshControl ? this.refreshControlHeight : 0))/_cw_scale),\n                },\n                contentSize: {\n                    height: this.scrollerHeight/_cw_scale,\n                    width: this.scrollerWidth/_cw_scale\n                },\n\t            velocity: {\n                    x: gestureState.vx/_cw_scale,\n                    y: gestureState.vy/_cw_scale\n                },\n\t            layoutMeasurement: {//满足VirtualizedList需要\n                    height: this.wrapperHeight/_cw_scale,\n                    width: this.wrapperWidth/_cw_scale\n                }\n            }\n        }]);\n    }\n\n    _checkDismissMode() {\n        //为on-drag时，拖动时隐藏软键盘。\n        if (this.props.keyboardDismissMode === 'on-drag') {\n            TextInputState.blur(TextInputState.currentFocus());\n        }\n    }\n\n    _checkShouldPersistTaps(e) {\n        // 判断是否隐藏软键盘\n        if (!this.isMoving) {\n            if (!this.props.keyboardShouldPersistTaps) {\n                let ele = e.nativeEvent.target,\n                    focusEle = TextInputState.currentFocus();\n                (ele !== focusEle) && (TextInputState.blur(focusEle));\n\n            }\n        }\n\n    }\n\n    _checkIfInputInScrollView(){\n        // var flag=false;\n        let focusEle = TextInputState.currentFocus();\n        if(this.scroller){\n            //某些浏览器不支持querySelectorAll，可能会报错： undefined is not a function。\n            let inputs = this.scroller.getElementsByTagName(\"input\");\n            for(let i = 0; i < inputs.length; i++){\n                if(focusEle===inputs[i]){\n                    return true;\n                }\n            }\n        }\n        return false;\n        // var inputs=this.scroller.querySelectorAll('input');\n        // inputs.forEach((input)=>{\n        //   if(focusEle===input){\n        //       flag=true;\n        //   }\n        // });\n        // console.log('_checkIfInputInScrollView='+flag);\n        // return flag;\n    }\n\n    // 刷新布局\n    _refresh(e) {\n\n        // 更新布局的width&hight\n        this.wrapperWidth = this.wrapper.clientWidth;\n        this.wrapperHeight = this.wrapper.clientHeight;\n        // this.wrapper.clientHeight; //window.screen.height\n\n        this.scrollerWidth = this.scroller.scrollWidth;\n        this.scrollerHeight = this.scroller.scrollHeight;\n\n        this.minScrollX = this.contentInset.left;\n        this.minScrollY = this.contentInset.top;\n        if (!this.props.horizontal) {\n            this.maxScrollX = 0;\n        } else {\n            this.maxScrollX = this.wrapperWidth - this.scrollerWidth - this.contentInset.right;\n        }\n        this.maxScrollY = this.wrapperHeight - this.scrollerHeight - this.contentInset.bottom;\n\n        // console.log('maxScrollY,wrapperHeight,scrollerHeight',this.maxScrollY,this.wrapperHeight ,this.scrollerHeight)\n        this.maxScrollX = this.maxScrollX > 0 ? 0 : this.maxScrollX;\n        this.maxScrollY = this.maxScrollY > 0 ? 0 : this.maxScrollY;\n\n        this.endTime = 0;\n        this.directionX = 0;\n        this.directionY = 0;\n\n        //更新stickyHeaderIndices的offset\n        if (this.stickyHeaderIndices.length > 0) {\n            this.stickyHeaderIndices.forEach((item, index) => {\n                this.stickyHeaderIndices[index].itemOffset = this.stickyHeaderIndices[index].itemDOM.offsetTop;\n                this.stickyHeaderIndices[index].itemHeight = this.stickyHeaderIndices[index].itemDOM.offsetHeight;\n            });\n        }\n\n        // 更新滚动条，如果不同则\n        if (this.showsVerticalScrollIndicator) {\n            let indicatorHeight = 0;\n            if (this.maxScrollY < 0) {\n                this.ableShowsVerticalScrollIndicator = true;\n                let indicatorMaxLength = this.wrapperHeight - 2 * INDICATOR_GAP;\n                indicatorHeight = Math.max(INDICATOR_MIN_SHOW_LENGTH, Math.floor(this.wrapperHeight * indicatorMaxLength / this.scrollerHeight));\n            } else {\n                this.ableShowsVerticalScrollIndicator = false;\n            }\n            if (this.state.indicatorVerticalHeight !== indicatorHeight) {\n                this.setState({indicatorVerticalHeight: indicatorHeight});\n            }\n        }\n\n        if (this.showsHorizontalScrollIndicator) {\n            let indicatorWidth = 0;\n            if (this.maxScrollX < 0) {\n                this.ableShowsHorizontalScrollIndicator = true;\n                let indicatorMaxWidth = this.wrapperWidth - 2 * INDICATOR_GAP;\n                indicatorWidth = Math.max(INDICATOR_MIN_SHOW_WIDTH, Math.floor(this.wrapperWidth * indicatorMaxWidth / this.scrollerWidth));\n            } else {\n                this.ableShowsHorizontalScrollIndicator = false;\n            }\n            if (this.state.indicatorHorizontalWidth !== indicatorWidth) {\n                this.setState({indicatorHorizontalWidth: indicatorWidth});\n            }\n        }\n\n        //更新页面\n        if (this.props.needrefresh) {\n            this.updateCurPage();\n            this.props.needrefresh({\n                x: this.x,\n                y: this.y\n            }, this.props.horizontal ? \"x\" : \"y\");\n        }\n        //更新定位\n        if(global.currentApp.isCheckKeyborad) {\n            let flag=this._checkIfInputInScrollView();\n            if(flag&&this.scroller){\n                this.scroller.scrollIntoView();\n                global.currentApp.isCheckKeyborad = false;\n            }\n        }\n        // 重置定位\n        if (this.y < this.maxScrollY || this.x < this.maxScrollX) {\n            let newX, newY;\n            (this.x < this.maxScrollX) && (newX = this.maxScrollX);\n            (this.y < this.maxScrollY) && (newY = this.maxScrollY);\n            this._scrollTo(newX, newY, 0);\n        } else {\n            this._scrollTo(this.x, this.y, 0);\n        }\n        if(!(typeof this.props.scrollEnabled ==\"boolean\"&& this.props.scrollEnabled==false)) {\n            this._execEvent('onScroll');\n        }\n    }\n\n    // 滚动条的显隐\n    _toggleIndicator(type) {\n        if (this.ableShowsVerticalScrollIndicator) {\n            this.indicatorVertical.style.opacity = type ? INDICATOR_OPACITY : 0;\n        }\n        if (this.ableShowsHorizontalScrollIndicator) {\n            this.indicatorHorizontal.style.opacity = type ? INDICATOR_OPACITY : 0;\n        }\n    }\n\n    // 判断是否重新回到最顶端或最低端并归位\n    _resetPosition(time = 0) {\n        let x = this.x,\n            y = this.y;\n\n        if (!this.props.horizontal || this.x > this.minScrollX) {\n            x = this.minScrollX;\n        } else if (this.x < this.maxScrollX) {\n            x = this.maxScrollX;\n        }\n\n        if (this.props.horizontal || this.y > this.minScrollY) {\n            y = this.minScrollY;\n        } else if (this.y < this.maxScrollY) {\n            y = this.maxScrollY;\n        }\n\n        if (this.state.isRefreshing && y === this.minScrollY) {\n            y = y + this.refreshControlHeight;\n        }\n\n        if (x === this.x && y === this.y) {\n            return false;\n        }\n\n        this._scrollTo(x, y, time,null,()=>{\n            this._execEvent('onMomentumScrollEnd');\n        });\n        return true;\n    }\n\n    // 从外部调用scrollTo时，先把之前的手势动画清除\n    /**\n     * 滚动到\n     *\n     * @method scrollTo\n     * @param {obj} options 滚动配置\n     * @param {number} [options.x] 横向位移\n     * @param {number} [options.y] 纵向位移\n     * @param {bool} [options.animated] 是否动画\n     * @param {number} [options.duration] 动画时长\n     * @description 滚动到某一位置，如果只在某一方向滚动，可以只传{x: x}或{y: y}。默认animated为true。\n     *\n     * ** 如果使用了RefreshControl组件，则y需要包含RefreshControl组件的高度。即：滚动到顶部，正常是 `scrollTo({y: 0})`\n     */\n    scrollTo(options, callback) {\n        options.x = options.x*_cw_scale || 0;\n        options.y = options.y*_cw_scale || 0;\n        //正在刷新时进行scrollTo,需要要减去refreshControl的height；无刷新时不需要减去refreshControl的height。\n        (this.props.refreshControl)&&(this.props.refreshControl.props.isRefreshing) && (options.y -= this.refreshControlHeight);\n        this._toggleIndicator(true);\n        this._scrollTo(-options.x, -options.y, options.animated!==false ? (options.duration ? options.duration : BOUNCETIME) : 0, null, ()=> {\n\t        if(options.animated!==false){\n\t\t        this._execEvent(\"onMomentumScrollEnd\");\n\t        }\n            this.updateCurPage();\n            callback && callback();\n        });\n    }\n\n    /**\n     * @method scrollToEnd\n     * @param {obj} options 滚动配置\n     * @param {bool} [options.animated] 是否动画\n     * @description 滚动到视图最底部（水平方向的视图则滚动到最右边）。\n     * 加上动画参数 scrollToEnd({animated:true}) 则启用平滑滚动动画，或是调用 scrollToEnd({animated: false})\n     * 来立即跳转。如果不使用参数，animated选项默认启用。\n     */\n    scrollToEnd(options){\n        let animated = options ? (options.animated===undefined ? true:options.animated) : true;\n        let x = this.props.horizontal ? this.maxScrollX/_cw_scale : 0;\n        let y = this.props.horizontal ? 0 : this.maxScrollY/_cw_scale;\n        this.scrollTo({x:-x, y:-y, animated:animated});\n    }\n\n    updateCurPage() {\n        if (this.props.pagingEnabled && this.props.horizontal) {\n            this.curPage = Math.floor(Math.abs(this.x) / this.wrapperWidth);\n        }\n\n        if (this.props.pagingEnabled && !this.props.horizontal) {\n            this.curPage = Math.floor(Math.abs(this.y) / this.wrapperHeight);\n        }\n    }\n\n    // 滚动到固定位置，time未定义则直接滚动没有动画效果\n    _scrollTo(x = 0, y = 0, time = 0, easing, callback) {\n        //fix Issue #413中第一个问题：scrollTo的_animate执行过程中会触发onLayout,\n        // 进而触发_refresh中的_scrollTo,this.curAnimation = -1导致_animate被迫提前退出，\n        // 无法完成开始scrollTo交代的滚动任务。\n        //故应在滚动位置不变时不进行滚动，从而避免前面的_animate提前退出。\n        if(x === this.x && y === this.y){\n            return;\n        }\n        easing = easing || utils.ease.circular;\n        if (!time || time <= 0) {\n            this.curAnimation = -1;\n            this._transitionTime(time);\n            this._transitionTimingFunction(easing);\n            this._translate(x, y);\n            callback && callback();\n        } else {\n            this._animate(x, y, time, easing.fn, callback);\n        }\n    }\n\n    _getStickyState(y, offset, lastHeight = 0) {\n        let stickyState;\n        switch (true) {\n            case (offset + y - lastHeight >= this.minScrollY):\n                stickyState = 0;\n                break;\n            case (offset + y > this.minScrollY && offset + y - lastHeight < this.minScrollY):\n                stickyState = 1;\n                break;\n            case (offset + y <= this.minScrollY):\n                stickyState = 2;\n                break;\n        }\n        return stickyState;\n    }\n\n    _transitionTime(time) {\n        time = time || 0;\n        let durationProp = utils.style.transitionDuration;\n        if (!durationProp) {\n            return;\n        }\n        this.scroller.style[durationProp] = time + 'ms';\n\n        if (!time && utils.isBadAndroid) {\n            this.scroller.style[durationProp] = '0.0001ms';\n            // remove 0.0001ms\n            let self = this;\n            self.rAF(function () {\n                if (self.scroller.style[durationProp] === '0.0001ms') {\n                    self.scroller.style[durationProp] = '0s';\n                }\n            });\n        }\n// INSERT POINT: _transitionTime\n\n    }\n\n    _transitionTimingFunction(easing) {\n        this.scroller.style[utils.style.transitionTimingFunction] = easing;\n        // INSERT POINT: _transitionTimingFunction\n    }\n\n    // 移动到固定地点\n    _translate(x, y) {\n\n        let _this = this;\n        if (!this.uIdx) {\n            this.uIdx = React.lockUpdater();\n        }\n        clearTimeout(this._uIdxClock);\n        this._uIdxClock = setTimeout(function () {\n            if (_this.uIdx) {\n                React.unlockUpdater(_this.uIdx);\n                _this.uIdx = null;\n            }\n        }, this.stateUnlockDelay);\n\n        isNaN(x) && (x = 0);\n        isNaN(y) && (y = 0);\n\n        this.x = x;\n        this.y = y;\n\n        this.contentOffset.x = -x;\n        this.contentOffset.y = -y;\n\n        // 更新sticky\n        if (this.stickyHeaderIndices.length > 0) {\n            // 为实现和QRN相同的ui效果（推上推下），并且减少对dom的读取，新增状态量0，1，2，3，4分别对应未固定，把上一个推上去，固定到顶端，被下一个推上去，被推过了头。其中0，2一定会有，其他的根据情况判断。\n            // 判断时，从最后一个开始判断，然后根据next的state可提前获取判断，无法提前判断的根据state判断。\n            // 最后，如果state和上次的不同，或是需要持续更新的state的变量，才进行更新操作。\n            // 其中0和4可以合并，但为了代码逻辑的清晰，分开来操作\n            let indicesLength = this.stickyHeaderIndices.length;\n            let stickyItem = Object.assign({}, this.stickyItem);\n            stickyItem.index = -1;\n            for (let i = indicesLength - 1; i >= 0; i--) {\n                let item = this.stickyHeaderIndices[i];\n                let nextItem = this.stickyHeaderIndices[i + 1];\n                let prevItem = this.stickyHeaderIndices[i - 1];\n                if (i < indicesLength - 1) {\n                    switch (true) {\n                        case (nextItem.itemStickState >= 2):\n                            item.itemStickState = 4;\n                            break;\n                        case (nextItem.itemStickState === 1):\n                            item.itemStickState = 3;\n                            break;\n                        default:\n                            item.itemStickState = this._getStickyState(y, item.itemOffset, prevItem ? prevItem.itemHeight : 0);\n                            break;\n                    }\n                } else {\n                    item.itemStickState = this._getStickyState(y, item.itemOffset, prevItem ? prevItem.itemHeight : 0);\n                }\n\n                // 只会有一个Item的state为2或3，设置flag的意义是在可以下拉更多超出边界，即没有stickyState为2的情况下清除View\n                if (item.itemStickState === 2) {\n                    stickyItem.index = item.itemIndex;\n                    stickyItem.state = 2;\n                }\n                if (item.itemStickState === 3) {\n                    stickyItem.index = item.itemIndex;\n                    stickyItem.state = 3;\n                    stickyItem.transformValue = ' translate(0px,' + ( -item.itemHeight + (this.minScrollY + nextItem.itemOffset + y)) + 'px) translateZ(0)';\n                }\n            }\n\n            // 如果需要更新translateValue，更新之\n            if (stickyItem.state === 2 &&this.stickyItem&& (this.stickyItem.index !== stickyItem.index || this.stickyItem.state === 3)) {\n                fastdom.mutate(() => {\n                    if(this.stickyWrapperDOM){\n                        this.stickyWrapperDOM.style[commonTransform] = 'translate(0px,0px) translateZ(0)';\n                    }\n                });\n            }\n            if (stickyItem.state === 3) {\n                fastdom.mutate(() => {\n                    if(this.stickyWrapperDOM){\n                        this.stickyWrapperDOM.style[commonTransform] = stickyItem.transformValue;\n                    }\n                });\n            }\n            // 更新render\n            if (this.stickyItem.index !== stickyItem.index && (stickyItem.state === 2 || stickyItem.state === 3)) {\n                this.setState({stickyItemIndex: stickyItem.index})\n                this.stickyItem = Object.assign({}, stickyItem);\n            }\n        }\n        // 更新滚动条\n        if (this.ableShowsVerticalScrollIndicator) {\n            let transformValue = 'translate(0px,' + (-this.y / this.scrollerHeight * (this.wrapperHeight - 2 * INDICATOR_GAP)) + 'px) translateZ(0)';\n            fastdom.mutate(() => {\n                this.indicatorVertical.style[commonTransform] = transformValue;\n            });\n        }\n\n        if (this.ableShowsHorizontalScrollIndicator) {\n            let transformValue = 'translate(' + (-this.x / this.scrollerWidth * (this.wrapperWidth - 2 * INDICATOR_GAP)) + 'px, 0px) translateZ(0)';\n            fastdom.mutate(() => {\n                this.indicatorHorizontal.style[commonTransform] = transformValue;\n\n            });\n        }\n\n        // 更新Refresh&Load\n        if (this.props.refreshControl) {\n            this.refreshControlRef && this.refreshControlRef.onScroll && this.refreshControlRef.onScroll({\n                y: y,\n            });\n        }\n\n        // fastdom.mutate(() => {\n\n        this.scroller.style[commonTransform] = 'translate(' + x + 'px,' + y + 'px) translateZ(0)';\n        // });\n        // var self = this;\n        // if (this.scroller._change2D) {\n        //   if (window.clearTimeout) {\n        //     clearTimeout(this.scroller._change2D);\n        //   }\n        // }\n        // this.scroller._change2D = setTimeout(function () {\n        //   if (-x == self.contentOffset.x && self.contentOffset.y == -y) {\n        //     self.scroller.style[commonTransform] = 'translate(' + x + 'px,' + y + 'px)';\n        //   }\n        //   delete self.scroller._change2D;\n        // }, 500);\n    }\n\n    _getAnimationIdx() {\n        this.animationIdx++;\n        this.curAnimation = this.animationIdx;\n        return this.curAnimation;\n    }\n\n    _isCurrentAnimationIdx(idx) {\n        let ret = this.curAnimation == idx;\n        return ret;\n    }\n\n    // 滚动with动画\n    _animate(destX, destY, duration, easingFn, callback) {\n        this.isAnimating = true;\n        let idx = this._getAnimationIdx();\n        let self = this,\n            startX = this.x,\n            startY = this.y;\n        let startTime = utils.getTime(),\n            destTime = startTime + duration;\n\n        function step() {\n            let now = utils.getTime();\n            //  清除上次的animatefreame，如果有的话\n            (self.rAF) && (cancelAnimationFrame(self.rAF));\n            // 外界通过设置curAnimation停止当前动画\n            if (!self._isCurrentAnimationIdx(idx)) {\n                self._execEvent('onScrollAnimationEnd');\n                callback && callback();\n\t            self.isAnimating = false;\n                return;\n            }\n            // 时间结束，按需进行回弹，隐藏滚动条，return\n            if (now >= destTime) {\n                self.curAnimation = -1;\n                self._translate(destX, destY);\n                if (!self._resetPosition(BOUNCETIME)) {\n                    global.currentApp.isScrolling=false;\n                    self._toggleIndicator(false);\n                    self._execEvent('onScrollAnimationEnd');\n                }\n\n                callback && callback();\n\t            self.isAnimating = false;\n                return;\n            }\n            // 一般情况，继续动画，计算\n            let newX, newY, easing;\n            now = (now - startTime) / duration;\n            easing = easingFn(now);\n            newX = Math.round((destX - startX) * easing + startX);\n            newY = Math.round((destY - startY) * easing + startY);\n            self._translate(newX, newY);\n            self.rAF = requestAnimationFrame(step);\n            self._execEvent('onScroll');\n        }\n\n        step();\n    }\n\n    /**\n     * 在layout前设置offset\n     *\n     * @method setContentOffsetBeforeLayout\n     * @param {PointPropType{x:x,y:y}} position 设置相对当前contentOffset的位移量\n     * @description 本方法用来设置contentOffset相对当前的contentOffset偏移多少，在下一次render的时候会生效。本方法的主要使用场景是，当滚动内容的高度发生变化时（尤其是变小时），希望render之后，用户看到的内容位置是不变的。\n     */\n    setContentOffsetBeforeLayout(offset) {\n        this.contentOffset.x = this.contentOffset.x - offset.x;\n        this.contentOffset.y = this.contentOffset.y - offset.y;\n        this.x = this.contentOffset.x;\n        this.y = this.contentOffset.y;\n    }\n\n    /**\n     * 开始下拉刷新\n     *\n     * @method startRefreshing\n     * @param {bool} fromResponder 是否通过js强制刷新\n     * @description 当前组件有refreshControl属性，并且没有正在下拉刷新，则强制触发下拉刷新，变成正在刷新的状态。fromResponder为true为通过手势scroll触发，false表示是强制触发的\n     */\n    startRefreshing(fromResponder) {\n        // fromResponder为true，表示是scroll时触发的；为false，表示是强制触发的\n        if (this.props.refreshControl && !this.state.isRefreshing) {\n            this.setState({\n                isRefreshing: true,\n                refreshResult: undefined,\n            });\n            if(this.refreshControlRef&&this.refreshControlRef.onRefresh){\n                this.refreshControlRef.onRefresh();\n            }\n            if (this.props.onRefresh) {\n                this.props.onRefresh();\n            }\n            this._scrollTo(0, this.refreshControlHeight, fromResponder ? BOUNCETIME : 0);\n        }\n    }\n\n    /**\n     * 停止下拉刷新\n     *\n     * @method stopRefreshing\n     * @param {obj} [config] 停止刷新时的配置项\n     * @param {bool} [config.animated] 回到顶部是否需要动画\n     * @param {number} [config.duration] <1.3.0> 回到顶部的动画时间，默认是300ms\n     * @param {bool} [config.result] <1.3.0> 表示刷新成功还是失败。undefined：不显示刷新之后的状态；true：显示『加载成功』；false：显示『加载失败』\n     * @description 当前组件有refreshControl属性，并且正在下拉刷新，则停止下拉刷新的状态。默认带有动画，可以设置{animated: false}取消。\n     *\n     * **停止刷新时，会自动ScrollTo顶部，所以不需要外部再调用。滚动到顶部的过程中，会禁止ScrollView响应。**\n     *\n     */\n    stopRefreshing(config = {}) {\n        if (this.props.refreshControl && this.state.isRefreshing) {\n            this.setState({\n                isRefreshing: false,\n                refreshResult: config.result,\n            });\n            setTimeout(()=> {\n                let duration = config.duration || SCROLLTO_DURATION;\n                this._resetPosition(config.animated === false ? 0 : duration);\n            });\n        }\n    }\n\n    /**\n     * 开始加载更多\n     *\n     * @method startLoading\n     * @description 当前组件有loadControl属性，并且没有正在加载，则强制触发加载更多，变成正在加载更多的状态\n     */\n    startLoading() {\n        if (this.props.loadControl && !this.state.isLoading) {\n            this.setState({\n                isLoading: true,\n            });\n            this.loadControl.onLoad();\n            if (this.props.onLoad) {\n                this.props.onLoad();\n            }\n        }\n        this._scrollTo(0, this.maxScrollY, BOUNCETIME);\n    }\n\n    /**\n     * 停止加载更多\n     *\n     * @method stopLoading\n     * @description 当前组件有loadControl属性，并且正在加载，则停止加载更多的状态\n     */\n    stopLoading() {\n        if (this.props.loadControl && this.state.isLoading) {\n            this.setState({\n                isLoading: false,\n            });\n            this._resetPosition(BOUNCETIME);\n        }\n    }\n\n    render() {\n        let props = this.props;\n        let scrollProps = {\n            ...props,\n            onScroll: noop, // 禁用掉自带onScroll\n            // 浏览器的默认下拉事件。PanResponder中已经禁用了。\n        };\n\n        let refreshControl = props.refreshControl || null;\n        this.refreshControlHeight = null;\n        if (refreshControl) {\n            this.refreshControlHeight = refreshControl.props.height;\n            refreshControl = React.cloneElement(refreshControl, {\n                ref: (ins)=>{this.refreshControlRef=ins} ,\n                isRefreshing: this.state.isRefreshing,\n                refreshResult: this.state.refreshResult,\n                style: [refreshControl.props.style, styles.refreshControl, {top: -this.refreshControlHeight}]\n            });\n        }\n\n        let indexedControl = props.indexedControl || null;\n        if (indexedControl) {\n            this.indexedControlHeight = indexedControl.props.height;\n            indexedControl = React.cloneElement(indexedControl, {\n                ref: (ins)=>{this.indexedControlRef=ins} ,\n                // isRefreshing: this.state.isRefreshing,\n                // refreshResult: this.state.refreshResult,\n                // style: [refreshControl.props.style, styles.refreshControl, {top: -this.refreshControlHeight}]\n            });\n        }\n\n        let loadControl = props.loadControl || null;\n        this.loadControlHeight = null;\n        if (loadControl) {\n            this.loadControlHeight = loadControl.props.height;\n            let loadControlChild = React.cloneElement(loadControl, {\n                ref:  (ins)=>{this.loadControlRef=ins},\n                isLoading: this.state.isLoading,\n\n            });\n            loadControl = (\n                <View style={{maxHeight: this.loadControlHeight, height: this.loadControlHeight}}>\n                    {loadControlChild}\n                </View>\n            );\n            // 为了内容不够时的loadControl的布局正确，加上一个View\n        }\n        let indicatorHorizontal = this.showsHorizontalScrollIndicator ?\n            (<View\n                style={[styles.indicator, styles.indicatorHorizontal, {width: this.state.indicatorHorizontalWidth}]}\n                ref={(ins)=>{this.indicatorHorizontalRef=ins}}\n            />) : null;\n        let indicatorVertical = this.showsVerticalScrollIndicator ?\n            (<View\n                style={[styles.indicator, styles.indicatorVertical, {height: this.state.indicatorVerticalHeight}]}\n                ref={(ins)=>{this.indicatorVerticalRef=ins}}\n            />) : null;\n\n        let stickIndex=this.state.stickyItemIndex;\n        if(this.props.isRenderHeader){\n            stickIndex=stickIndex-1;\n        }\n        //fix:看#451行代码，当存在refreshControl时对index+1，而此处从props.children中取的元素，并非从this.scroller.childNodes中，\n        //故此处的index应减1。\n        if(props.refreshControl){\n            stickIndex=stickIndex-1;\n        }\n        let stickyWrapper=props.stickyHeaderIndices && props.stickyHeaderIndices.length > 0 && !props.horizontal ?\n            (<View style={styles.stickyWrapper} ref={(ins)=>{this.stickyWrapperRef=ins}}>\n                {stickIndex > -1 ? (props.inheritsType ==\"ListView\" ?  props.children[1][stickIndex] : props.children[stickIndex]) : null}\n            </View>) : null;\n\n        //临时修复ios8 safari bug 此处修改将导致点击事件后，滚动事件失效，先去掉\n        // if(scrollProps.style&&typeof( scrollProps.style.flex)!=\"undefined\"&&scrollProps.style.flex==\"0\"  ){\n        //     styles.scrollBase.flex=\"0 0 auto\";\n        //     styles.scrollBase.WebkitFlex=\"0 0 auto\";\n        // }\n\n        //justifyContent: 'center',alignItems: 'center'会造成ScrollView样式和滚动出错，因此将其剔除。\n\t    scrollProps.style && scrollProps.style[\"justifyContent\"] && (delete scrollProps.style[\"justifyContent\"]);\n\t    scrollProps.style && scrollProps.style[\"alignItems\"] && (delete scrollProps.style[\"alignItems\"]);\n\n        return (\n            <Resizable\n                ref={(ins)=>{this.wrapperRef=ins}}\n\t\t        {...scrollProps}\n\t\t        {...this._panResponder.panHandlers}\n                style={[styles.scrollView, scrollProps.style]}\n                onResize={(e)=> {\n\t\t\t        this._refresh(e);\n\t\t        }}\n            >\n\t\t        {[stickyWrapper]}\n                <Resizable\n                    className={scrollProps.horizontal ? 'rn-scroller-hori' : 'rn-scroller-vert'}\n                    style={[\n\t\t\t\t        scrollProps.contentContainerStyle,\n\t\t\t\t        styles.scroller, scrollProps.horizontal && styles.scrollerHorizontal,\n\t\t\t\t        scrollProps.endFillColor && {backgroundColor: scrollProps.endFillColor}\n\t\t\t        ]}\n                    ref={(ins)=>{\n\t\t\t\t        this.scrollerRef=ins\n\t\t\t        }}\n                    onLayout={(e)=> {\n\t\t\t\t        scrollProps.onContentSizeChange && scrollProps.onContentSizeChange(this.scrollerWidth/_cw_scale, this.scrollerHeight/_cw_scale);\n\t\t\t\t        //为了fix Issue #452，暂时删除下面的代码。\n\t\t\t\t        //修复百度浏览器拉不到底：最后一次onLayout执行后没有执行onResize，导致scrollHeight没有更新。\n\t\t\t\t        // if(isBaiduBrowser&&this.scroller&&(this.scrollerHeight!=this.scroller.scrollHeight|| this.scrollerWidth!=this.scroller.scrollerWidth)){\n\t\t\t\t\t     //    this._refresh(e);\n\t\t\t\t        // }\n\t\t\t        }}\n                    onResize={(e)=> {\n\t\t\t\t        this._refresh(e);\n\t\t\t        }}\n                >\n\t\t\t        {[refreshControl]}\n\t\t\t        {props.children}\n\t\t\t        {loadControl}\n\n                </Resizable>\n\t\t        {indicatorHorizontal}\n\t\t        {indicatorVertical}\n\t\t        {indexedControl}\n            </Resizable>\n        );\n    }\n}\n\nScrollView = NativeMethodsWrapper(ScrollView);\nScrollView.displayName=\"ScrollView\";\nexport default ScrollView\n\n// mixin.onClass(ScrollView, NativeMethodsMixin);\n// module.exports = ScrollView;\n\n"]}