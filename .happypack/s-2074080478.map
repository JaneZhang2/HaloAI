{"version":3,"sources":["node_modules/@ctrip/crnweb/src/react-native/modules/wrapper/reactTimerWrapper.js"],"names":["GLOBAL","global","setter","_setter","_clearer","array","callback","delta","id","call","apply","arguments","bind","push","clearer","index","indexOf","splice","_timeouts","_clearTimeout","clearTimeout","_setTimeout","setTimeout","_intervals","_clearInterval","clearInterval","_setInterval","setInterval","_immediates","_clearImmediate","clearImmediate","_setImmediate","setImmediate","_rafs","_cancelAnimationFrame","cancelAnimationFrame","_requestAnimationFrame","requestAnimationFrame","WrappedComponent","reactTimerWrapper","forEach"],"mappings":"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","file":"reactTimerWrapper.js","sourceRoot":"/Users/jane/Documents/HaloAI","sourcesContent":["/*\r\n *  Copyright (c) 2015-present, Facebook, Inc.\r\n *  All rights reserved.\r\n *\r\n *  This source code is licensed under the BSD-style license found in the\r\n *  LICENSE file in the root directory of this source tree. An additional grant\r\n *  of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n */\r\n'use strict';\r\n\r\nlet GLOBAL = global;\r\n\r\n\r\nlet setter = function(_setter, _clearer, array) {\r\n    return function(callback, delta) {\r\n        var id = _setter(function() {\r\n            _clearer.call(this, id);\r\n            callback.apply(this, arguments);\r\n        }.bind(this), delta);\r\n\r\n        if (!this[array]) {\r\n            this[array] = [id];\r\n        } else {\r\n            this[array].push(id);\r\n        }\r\n        return id;\r\n    };\r\n};\r\n\r\nlet clearer = function(_clearer, array) {\r\n    return function(id) {\r\n        if (this[array]) {\r\n            var index = this[array].indexOf(id);\r\n            if (index !== -1) {\r\n                this[array].splice(index, 1);\r\n            }\r\n        }\r\n        _clearer(id);\r\n    };\r\n};\r\n\r\nlet _timeouts = 'TimerMixin_timeouts';\r\nlet _clearTimeout = clearer(GLOBAL.clearTimeout, _timeouts);\r\nlet _setTimeout = setter(GLOBAL.setTimeout, _clearTimeout, _timeouts);\r\n\r\nlet _intervals = 'TimerMixin_intervals';\r\nlet _clearInterval = clearer(GLOBAL.clearInterval, _intervals);\r\nlet _setInterval = setter(GLOBAL.setInterval, function() {/* noop */}, _intervals);\r\n\r\nlet _immediates = 'TimerMixin_immediates';\r\nlet _clearImmediate = clearer(GLOBAL.clearImmediate, _immediates);\r\nlet _setImmediate = setter(GLOBAL.setImmediate, _clearImmediate, _immediates);\r\n\r\nlet _rafs = 'TimerMixin_rafs';\r\nlet _cancelAnimationFrame = clearer(GLOBAL.cancelAnimationFrame, _rafs);\r\nlet _requestAnimationFrame = setter(GLOBAL.requestAnimationFrame, _cancelAnimationFrame, _rafs);\r\n\r\n\r\nexport default (WrappedComponent) => {\r\n    class reactTimerWrapper extends WrappedComponent {\r\n        componentWillUnmount() {\r\n            super.componentWillUnmount&&super.super();\r\n            this[_timeouts] && this[_timeouts].forEach(function(id) {\r\n                GLOBAL.clearTimeout(id);\r\n            });\r\n            this[_timeouts] = null;\r\n            this[_intervals] && this[_intervals].forEach(function(id) {\r\n                GLOBAL.clearInterval(id);\r\n            });\r\n            this[_intervals] = null;\r\n            this[_immediates] && this[_immediates].forEach(function(id) {\r\n                GLOBAL.clearImmediate(id);\r\n            });\r\n            this[_immediates] = null;\r\n            this[_rafs] && this[_rafs].forEach(function(id) {\r\n                GLOBAL.cancelAnimationFrame(id);\r\n            });\r\n            this[_rafs] = null;\r\n        }\r\n\r\n        setTimeout= _setTimeout\r\n        clearTimeout= _clearTimeout\r\n\r\n        setInterval= _setInterval\r\n        clearInterval= _clearInterval\r\n\r\n        setImmediate =_setImmediate\r\n        clearImmediate = _clearImmediate\r\n\r\n        requestAnimationFrame = _requestAnimationFrame\r\n        cancelAnimationFrame = _cancelAnimationFrame\r\n    }\r\n    return reactTimerWrapper\r\n}\r\n\r\n\r\n"]}