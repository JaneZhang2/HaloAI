{"version":3,"sources":["node_modules/@ctrip/crnweb/src/crn/lib/HeaderView/HeaderView.js"],"names":["HeaderView","props","state","iosHotFixContent","headerHeight","title","titleColor","titleFontSize","subtitle","subtitleColor","subtitleFontSize","backgroundColor","renderHeaderView","_renderHeaderView","bind","renderContentView","_renderContentView","leftViewWidth","renderLeftView","_renderLeftView","renderCenterView","_renderCenterView","rightViewWidth","renderRightView","global","navigator","userAgent","match","Platform","isInApp","indexOf","flexDirection","style","height","width","document","_currentPageTitle","nextProps","setState","tintColor","relativeCenter","_revertPageTitle","color","headerStyle","position","zIndex","overflow","push","justifyContent","Math","max","styles","center","other","currentApp","pageInstance","pop","navigation","_renderTitle","_renderSubtitle","length","fontSize","alignSelf","Component","StyleSheet","create","flex"],"mappings":"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","file":"HeaderView.js","sourceRoot":"/Users/jane/Documents/HaloAI","sourcesContent":["/**\r\n * Created by bianyl on 2016/10/17.\r\n */\r\n'use strict';\r\n\r\nimport React, {Component} from 'react';\r\nimport {StyleSheet, Text, View, Platform, Dimensions} from 'react-native';\r\nimport  NavigationBarButton from '../NavigationBarButton';\r\n\r\nexport default class HeaderView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            iosHotFixContent:null,\r\n            headerHeight:44,\r\n            title:this.props.title || '',\r\n            titleColor:this.props.titleColor || 'white',\r\n            titleFontSize:this.props.titleFontSize || 17,\r\n            subtitle:this.props.subtitle || '',\r\n            subtitleColor:this.props.subtitleColor || 'white',\r\n            subtitleFontSize:this.props.subtitleFontSize || 15,\r\n            backgroundColor:this.props.backgroundColor || 'rgb(25, 160, 240)',\r\n            renderHeaderView:this.props.renderHeaderView || this._renderHeaderView.bind(this),\r\n            renderContentView:this.props.renderContentView || this._renderContentView.bind(this),\r\n            leftViewWidth:this.props.leftViewWidth || 44,\r\n            renderLeftView:this.props.renderLeftView || this._renderLeftView.bind(this),\r\n            renderCenterView:this.props.renderCenterView || this._renderCenterView.bind(this),\r\n            rightViewWidth:this.props.rightViewWidth || 0,\r\n            renderRightView:this.props.renderRightView || (() => {return null;}),\r\n        };\r\n        if(global.navigator&&global.navigator.userAgent.match(/(iPhone\\sOS)\\s([\\d_]+)/)&&  (Platform.isInApp)) {\r\n\t        // iphoneX适配\r\n\t        this.state.headerHeight = global.navigator.userAgent.indexOf(\"iPhoneX\") > 0 ? 88:64;\r\n            this.state.iosHotFixContent =  <View style={{flexDirection: 'row',...this.props.style,height: this.state.headerHeight-44,width: '100%'}}> </View>;\r\n            // this.state.headerHeight =64;\r\n        }\r\n        if(global.document){\r\n            this._currentPageTitle=global.document.title;\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        return this.state.renderHeaderView();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.setState({\r\n            title: nextProps.title ? nextProps.title : this.state.title,\r\n            titleColor: nextProps.titleColor ? nextProps.titleColor : this.state.titleColor,\r\n            tintColor: nextProps.tintColor ? nextProps.tintColor : this.state.tintColor,\r\n            titleFontSize: nextProps.titleFontSize ? nextProps.titleFontSize : this.state.titleFontSize,\r\n            subtitle: nextProps.subtitle ? nextProps.subtitle : this.state.subtitle,\r\n            subtitleColor: nextProps.subtitleColor ? nextProps.subtitleColor : this.state.subtitleColor,\r\n            subtitleFontSize: nextProps.subtitleFontSize ? nextProps.subtitleFontSize : this.state.subtitleFontSize,\r\n            backgroundColor: nextProps.backgroundColor ? nextProps.backgroundColor : this.state.backgroundColor,\r\n            leftViewWidth: nextProps.leftViewWidth ? nextProps.leftViewWidth : this.state.leftViewWidth,\r\n            rightViewWidth: nextProps.rightViewWidth ? nextProps.rightViewWidth : this.state.rightViewWidth,\r\n            relativeCenter: nextProps.relativeCenter ? nextProps.relativeCenter : this.state.relativeCenter,\r\n        });\r\n    }\r\n\r\n    _revertPageTitle(title){\r\n        if(global.document){\r\n            global.document.title=title||this._currentPageTitle;\r\n        }\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._revertPageTitle();\r\n    }\r\n\r\n    setBackgroundColor(color) {\r\n        this.setState({\r\n            backgroundColor:color,\r\n        });\r\n    }\r\n\r\n    setTitle(title) {\r\n        this.setState({\r\n            title:title,\r\n        });\r\n    }\r\n\r\n    setTitleColor(color) {\r\n        this.setState({\r\n            titleColor:color,\r\n        });\r\n    }\r\n\r\n    setSubtitle(subtitle) {\r\n        this.setState({\r\n            subtitle:subtitle,\r\n        });\r\n    }\r\n\r\n    setSubtitleColor(color) {\r\n        this.setState({\r\n            subtitleColor:color,\r\n        });\r\n    }\r\n\r\n    setRenderLeftView(renderLeftView, leftViewWidth = 44) {\r\n        this.setState({\r\n            leftViewWidth:leftViewWidth || 0,\r\n            renderLeftView:renderLeftView,\r\n        });\r\n    }\r\n\r\n    setRenderCenterView(renderCenterView) {\r\n        this.setState({\r\n            renderCenterView:renderCenterView\r\n        });\r\n    }\r\n\r\n    setRenderRightView(renderRightView, rightViewWidth) {\r\n        this.setState({\r\n            rightViewWidth:rightViewWidth || 0,\r\n            renderRightView:renderRightView,\r\n        });\r\n    }\r\n\r\n    _renderHeaderView() {\r\n        var headerStyle=[{height: this.state.headerHeight,width:'100%',position:'relative',zIndex: 9999,backgroundColor:this.state.backgroundColor, overflow:'hidden'}];\r\n        this.props.style&&headerStyle.push(this.props.style);\r\n            return <View style = {headerStyle}>{this.state.renderContentView()}</View>\r\n    }\r\n\r\n    _renderContentView() {\r\n          return (\r\n            <View>\r\n                {this.state.iosHotFixContent||''}\r\n                <View style={{flexDirection: 'row',...this.props.style,height: 44,width: '100%'}}>\r\n                    <View style = {{\r\n                        flexDirection: 'row',\r\n                        justifyContent: 'flex-start',\r\n                        width: Math.max(this.state.rightViewWidth, this.state.leftViewWidth)\r\n                    }}>{this.state.renderLeftView()}</View>\r\n                    <View style = {styles.center}>{this.state.renderCenterView()}</View>\r\n                    <View style = {{width: Math.max(this.state.rightViewWidth, this.state.leftViewWidth), justifyContent:'center'}}>{this.state.renderRightView ? this.state.renderRightView() : null}</View>\r\n                </View>\r\n            </View>);\r\n    }\r\n\r\n    _renderLeftView() {\r\n        let other = this.props.tintColor ? {tintColor :this.props.tintColor} : {};\r\n        return <NavigationBarButton {...other} type = {'icon_back'} onPress = {() => {\r\n            if(currentApp.pageInstance&&typeof(currentApp.pageInstance.pop)==\"function\"){\r\n                currentApp.pageInstance.pop();\r\n            }else{\r\n                currentApp.navigation.pop();\r\n            }\r\n        }}/>;\r\n    }\r\n\r\n    _renderCenterView() {\r\n        return (<View>\r\n            {this._renderTitle()}\r\n            {this._renderSubtitle()}\r\n        </View>);\r\n    }\r\n\r\n    _renderTitle() {\r\n        if(this.state.title && this.state.title.length > 0){\r\n            if(global.document){\r\n                global.document.title=this.state.title\r\n            }\r\n            return <Text allowFontScaling = {false} style = {{color:this.state.titleColor, fontSize:this.state.titleFontSize, alignSelf:'center'}} numberOfLines = {(this.state.subtitle && this.state.subtitle.length > 0) ? 1 : 2}>{this.state.title}</Text>\r\n\r\n        }else{\r\n            return null;\r\n        }\r\n    }\r\n\r\n    _renderSubtitle() {\r\n        return (this.state.subtitle && this.state.subtitle.length > 0) ? <Text allowFontScaling = {false} style = {{color:this.state.subtitleColor, fontSize:this.state.subtitleFontSize, alignSelf:'center'}} numberOfLines = {1}>{this.state.subtitle}</Text> : null;\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    center: {\r\n        flex:1,\r\n        height:44,\r\n        flexDirection:'column',\r\n        justifyContent:'center',\r\n    }\r\n});"]}