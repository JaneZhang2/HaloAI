{"version":3,"sources":["node_modules/@ctrip/crnweb/src/react-native/apis/AppRegistry/AppRegistry.web.js"],"names":["global","webViews","cw_routeMapConfig","WEBPACK_ROUTEMAP","cw_isI18n","WEBPACK_ISI18N","cw_storage_key_headInfo","document","runnables","StyleSheet","inject","cssInject","addContainer","tag","props","ele","createElement","pro","body","appendChild","AppRegistry","registerConfig","config","i","length","appConfig","run","registerRunnable","appKey","registerComponent","component","GetRequest","url","location","search","theRequest","indexOf","str","substr","strs","split","sKeyval","key","val","replace","unescape","decodeURIComponent","initialProps","urlQuery","href","getComponentFunc","appParameters","rootTag","Platform","isInApp","params","flag","JSON","parse","name","e","console","log","versionCode","version","localStorage","setItem","stringify","syscode","systemCode","cver","internalVersion","xsid","extSouceID","cid","clientID","sid","sourceId","appId","serverVersion","platform","device","AllianceID","allianceId","OUID","ouId","userInfo","data","app","callback","CtripPage","app_show_loading_page","runApplication","getElementById","showFunc","CtripUtil","app_init_member_H5_info","json_obj","tagname","param","history","back","setTimeout","func","getAppKeys","Object","keys","CtripBar","app_set_navbar_hidden","app_hide_loading_page","GlobalComponentRoot","upper","middle","lower","addEventListener","preventDefault","obj","max","place","gid","forceUpdate","push","forEach","value","array","splice","style","zIndex","map","Component","_cnt","utils","getGidNum","init","that","ReactDOM","render","judgePlace","type","callBack","guid","getGlobalComponentRoot","addComponent","onShow","apply","hideContainer","removeComponent","onHide","addClass","className","classList","add","join","removeClass","remove","index"],"mappings":"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","file":"AppRegistry.web.js","sourceRoot":"/Users/jane/Documents/HaloAI","sourcesContent":["/*\r\n *\r\n * @providesModule AppRegistry\r\n */\r\nimport React,{Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n//必须放在最前面,处理nodejs的专有变量\r\n// import processRef from '../process/index.web';\r\nimport Platform from './../Platform/Platform.web';\r\nimport  StyleSheet from './../../apis/StyleSheet/StyleSheet.web';\r\n\r\nimport renderApplication from './renderApplication';\r\n\r\n\r\nglobal.webViews = {}\r\nglobal.cw_routeMapConfig=WEBPACK_ROUTEMAP;\r\nglobal.cw_isI18n=WEBPACK_ISI18N;\r\nconst cw_storage_key_headInfo=\"cw_storage_key_headInfo_cache\";\r\nvar document=global.document;\r\n\r\nlet runnables = {};\r\n\r\nimport cssInject from './../../apis/StyleSheet/CCSWillBeInjected.web';\r\n\r\nStyleSheet.inject(cssInject);\r\n\r\nfunction addContainer(tag, props) {\r\n    let ele = document.createElement(tag);\r\n    for (let pro in props) {\r\n        if(pro==\"style\"){\r\n            ele[pro][\"cssText\"] += props[pro]\r\n        }else{\r\n            ele[pro] = props[pro]\r\n        }\r\n    }\r\n    document.body.appendChild(ele)\r\n    return ele\r\n}\r\nlet AppRegistry = {\r\n    registerConfig: function(config) {\r\n        for (let i = 0; i < config.length; ++i) {\r\n            let appConfig = config[i];\r\n            if (appConfig.run) {\r\n                AppRegistry.registerRunnable(appConfig.appKey, appConfig.run);\r\n            } else {\r\n                AppRegistry.registerComponent(appConfig.appKey, appConfig.component);\r\n            }\r\n        }\r\n    },\r\n\r\n    GetRequest() {\r\n        let url = location.search; //获取url中\"?\"符后的字串\r\n        let theRequest = {};\r\n        if (url.indexOf(\"?\") != -1) {\r\n            let str = url.substr(1);\r\n            let strs = str.split(\"&\");\r\n            for(let i = 0; i < strs.length; i ++) {\r\n                let sKeyval=strs[i];\r\n                let key=sKeyval.split(\"=\")[0];\r\n                let val=sKeyval.replace(key+'=','');\r\n                theRequest[key]=unescape(decodeURIComponent(val));\r\n            }\r\n        }\r\n        return {initialProps:{urlQuery:theRequest,url:location.href}};\r\n    },\r\n    registerComponent: function(appKey, getComponentFunc) {\r\n        runnables[appKey] = {\r\n            run: (appParameters) =>\r\n                renderApplication(getComponentFunc(), appParameters.initialProps, appParameters.rootTag)\r\n        };\r\n        \r\n        if(Platform.isInApp ) {\r\n            let params = null,flag=false;\r\n            try {\r\n                params = JSON.parse(global.name);\r\n            } catch(e) {\r\n                console.log('global.name parse error',e);\r\n            }\r\n            if (params && params.versionCode && params.version) {\r\n                flag=true;\r\n                try {\r\n                    global.localStorage.setItem(cw_storage_key_headInfo, JSON.stringify({\r\n                        syscode: params.systemCode || \"\",\r\n                        cver: params.internalVersion || params.version || \"\",\r\n                        xsid: params.extSouceID || \"\",\r\n                        cid: params.clientID || \"\",\r\n                        sid: params.sourceId || \"\",\r\n                        version: params.version || \"\",\r\n                        appId: params.appId || \"\",\r\n                        serverVersion: params.serverVersion || \"\",\r\n                        platform: params.platform || \"\",\r\n                        device: params.device,\r\n                        AllianceID: params.allianceId || \"\",\r\n                        OUID: params.ouId ? params.ouId || \"\" : \"\"\r\n                    }));\r\n                }catch(e){\r\n                    console.log(\"localStorage Fail\");\r\n                }\r\n\r\n                try {\r\n                    global.localStorage.setItem(\"USERINFO\", JSON.stringify(params.userInfo&&params.userInfo.data||\"\"));\r\n                }catch(e){\r\n                    console.log(\"localStorage Fail\");\r\n                }\r\n\r\n                if( !global.app ){\r\n                    global.app = {};\r\n                    global.app.callback=function(){\r\n                    };\r\n                }else{\r\n                    global.app.callback=function(){\r\n                    };\r\n                }\r\n                global.CtripPage&&CtripPage.app_show_loading_page();\r\n                AppRegistry.runApplication(appKey, Object.assign( {\r\n                    rootTag: document.getElementById('mainMock')\r\n                },AppRegistry.GetRequest()));\r\n            } else {\r\n                let showFunc = function(){\r\n                    flag=true;\r\n                    CtripPage.app_show_loading_page();\r\n                    AppRegistry.runApplication(appKey, Object.assign({\r\n                        rootTag: document.getElementById('mainMock')\r\n                    }, AppRegistry.GetRequest()));\r\n                    global.CtripUtil&&CtripUtil.app_init_member_H5_info();\r\n                };\r\n                global.app = {\r\n                    callback: function (json_obj) {\r\n                        let tagname = json_obj.tagname;\r\n\r\n                        if (tagname == 'web_view_finished_load') {\r\n                            if(!flag){\r\n\r\n                                showFunc();\r\n                            }\r\n                        } else if(tagname == 'init_member_H5_info'){\r\n                            let params=json_obj.param;\r\n                            try {\r\n                                global.localStorage.setItem(\"USERINFO\", JSON.stringify(params&&params.userInfo&&params.userInfo.data||\"\"));\r\n                            }catch(e){\r\n                                console.log(\"localStorage Fail\");\r\n                            }\r\n                        } else if (tagname === 'back') {\r\n                            history.back();\r\n                        }\r\n                    }\r\n                };\r\n                setTimeout(function(){\r\n                    if(!flag){\r\n                        showFunc();\r\n                    }\r\n                },5000)\r\n            }\r\n        }else{\r\n            AppRegistry.runApplication(appKey, Object.assign( {\r\n                rootTag: document.getElementById('mainMock')\r\n            },AppRegistry.GetRequest()));\r\n        }\r\n    },\r\n    registerRunnable: function(appKey, func) {\r\n        runnables[appKey] = {\r\n            run: func\r\n        };\r\n        return appKey;\r\n    },\r\n\r\n    getAppKeys: function(){\r\n        return Object.keys(runnables);\r\n    },\r\n\r\n    runApplication: function(appKey, appParameters) {\r\n        runnables[appKey].run(appParameters);\r\n        // 在url上加isHideNavBar=yes 极少数情况下不生效，增加一次隐藏native navbar的补偿\r\n        global.CtripBar && global.CtripBar.app_set_navbar_hidden && global.CtripBar.app_set_navbar_hidden(true);\r\n        global.CtripPage&&CtripPage.app_hide_loading_page();\r\n    },\r\n\r\n};\r\n\r\n// 用来渲染Modal，Alert...\r\n\r\nclass GlobalComponentRoot extends Component{\r\n    componentWillMount(){\r\n        this.upper = [];\r\n        this.middle = [];\r\n        this.lower = [];\r\n        //fix:Modal层滑动时会触发浏览器默认滑动（Issue #420）。\r\n\t    document.getElementById('globalComponentRoot').addEventListener('touchmove',(e)=>{\r\n\t\t    e.preventDefault && e.preventDefault();\r\n\t    }, false);\r\n    }\r\n    // obj形式为{component:Component,gid:gid,place:place}\r\n    addComponent(obj) {\r\n        for (let i = 0, max = this[obj.place].length; i < max; i++){\r\n            if (this[obj.place][i].gid === obj.gid){\r\n                this[obj.place][i] = obj;\r\n                this.forceUpdate();\r\n                return;\r\n            }\r\n        }\r\n        this[obj.place].push(obj);\r\n        this.forceUpdate();\r\n    }\r\n    removeComponent(gid,place) {\r\n        if(!gid){\r\n            this.upper = [];\r\n            this.middle = [];\r\n            this.lower = [];\r\n        }else {\r\n            this[place].forEach((value,key,array)=>{\r\n                if(value.gid === gid){\r\n                    array.splice(key,1);\r\n                    return;\r\n                }\r\n            });\r\n        }\r\n        this.forceUpdate();\r\n    }\r\n\r\n    render() {\r\n        if(this.upper.length + this.middle.length + this.lower.length > 0){\r\n            document.getElementById('globalComponentRoot').style.zIndex = 10;\r\n        }else {\r\n            document.getElementById('globalComponentRoot').style.zIndex = -1;\r\n        }\r\n        return (\r\n            //issue:当Modal的children中有zIndex>0的元素时，\r\n\t        // 与Toast叠加在一起时，Toast会被覆盖在底部，\r\n\t        // 该bug首次出现在特价机票的日历选择中。\r\n            //fix：给lower,middle,upper层加zIndex进行层叠上下文的隔离。\r\n            <div className=\"rn-root\">\r\n                {this.lower.length > 0 ?\r\n                    (<div className = \"rn-global-compontent\" style={{zIndex:0}}>\r\n                        {this.lower.map((value,key)=>{\r\n                            return value.component;\r\n                        })}\r\n                    </div>) : null}\r\n                {this.middle.length > 0 ?\r\n                    (<div className = \"rn-global-compontent\" style={{zIndex:1}}>\r\n                        {this.middle.map((value,key)=>{\r\n                            return value.component;\r\n                        })}\r\n                    </div>) : null}\r\n                {this.upper.length > 0 ?\r\n                    (<div className = \"rn-global-compontent\" style={{zIndex:2}}>\r\n                        {this.upper.map((value,key)=>{\r\n                            return value.component;\r\n                        })}\r\n                    </div>) : null}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nlet _cnt = 1;\r\n\r\nAppRegistry.utils = {\r\n    // 获取唯一的编号\r\n    getGidNum: function() {\r\n        return _cnt++\r\n    },\r\n\r\n    GlobalComponentRoot : null,\r\n    init : function(){\r\n        let that = this;\r\n        // 初始化\r\n        if(!this.GlobalComponentRoot){\r\n          ReactDOM.render(\r\n              <GlobalComponentRoot/>\r\n          , document.getElementById('globalComponentRoot'),function(){\r\n\t\t          that.GlobalComponentRoot = this;\r\n              });\r\n        }\r\n    },\r\n    // 根据组件判断在全局组件中的位置\r\n    // Modal最下层，Login中层，其余的按照先后顺序进入最上层。\r\n    judgePlace : function(type){\r\n        let place;\r\n        switch (type) {\r\n          case 'Modal':\r\n            place = 'lower';\r\n            break;\r\n          default:\r\n            place = 'upper';\r\n        }\r\n        return place;\r\n    },\r\n    /*\r\n    * @method render\r\n    * @brief 渲染某个组件 Component为一个key值为‘gid’的组件，因为直接从Component判断的type可能并不是真正的type，比如QShare之类，统一传递\r\n    * gid由‘type-num’组成。\r\n    * callback.onShow会在结束时调用。\r\n    * Component.key在某些情况下娶不到，所以alias为guid；\r\n    * */\r\n    render: function(Component, callBack) {\r\n        this.init();\r\n        let that = this;\r\n        let gid = Component.key||(Component.props&&Component.props.guid);\r\n        let type = gid.split('-')[0];\r\n        let place = this.judgePlace(type);\r\n\t    //fix：ReactDOM.render()异步渲染问题。\r\n        function getGlobalComponentRoot() {\r\n            if(that.GlobalComponentRoot){\r\n\t            that.GlobalComponentRoot && that.GlobalComponentRoot.addComponent({component:Component,gid:gid,place:place});\r\n\t            callBack && callBack.onShow && callBack.onShow.apply(that);\r\n            }else{\r\n                setTimeout(getGlobalComponentRoot,0);//前面线程执行完之后才会执行setTimeout里的function\r\n            }\r\n        }\r\n\t    getGlobalComponentRoot();\r\n    },\r\n    // 删除某个组件。如果未给出gid,则删除全部(主要用于导航切换时)\r\n    hideContainer: function(gid,callBack) {\r\n      if(!gid){\r\n          this.GlobalComponentRoot && this.GlobalComponentRoot.removeComponent();\r\n      }else{\r\n          let type = gid.split('-')[0];\r\n          let place = this.judgePlace(type);\r\n          this.GlobalComponentRoot && this.GlobalComponentRoot.removeComponent(gid,place);\r\n      }\r\n      callBack && callBack.onHide && callBack.onHide();\r\n    },\r\n\r\n    addContainer: addContainer,\r\n    addClass: function(ele, className) {\r\n        if (!ele || !className) {\r\n            return;\r\n        }\r\n        if (ele.classList) {\r\n            ele.classList.add(className);\r\n        } else {\r\n            // 如果类名存在就不做任何操作，避免 reflow\r\n            let classList = ele.className.split(/\\s+/);\r\n            if (classList.indexOf(className) === -1) {\r\n                classList.push(className);\r\n                ele.className = classList.join(' ');\r\n            }\r\n        }\r\n    },\r\n    removeClass: function(ele, className) {\r\n        if (!ele || !className) {\r\n            return;\r\n        }\r\n        if (ele.classList) {\r\n            ele.classList.remove(className);\r\n        } else {\r\n            // 如果类名不存在就不做任何操作，避免 reflow\r\n            let classList = ele.className.split(/\\s+/);\r\n            let index = classList.indexOf(className);\r\n            if (index !== -1) {\r\n                classList.splice(index, 1);\r\n                ele.className = classList.join(' ');\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default AppRegistry\r\n"]}