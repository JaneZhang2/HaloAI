{"version":3,"sources":["node_modules/@ctrip/crnweb/src/react-native/apis/StyleSheet/fixFlexBox.js"],"names":["flexboxSpec","global","document","testStyle","createElement","style","test","navigator","userAgent","exp","versionArr","exec","version","intVersion","parseInt","isNaN","oldNames","flex","order","flexDirection","alignItems","justifyContent","flexWrap","alignSelf","oldValues","fixFlexBox","name","value","result","display","useFlexbox","oldValue","oldName","indexOf","dir","WebkitBoxDirection","fixFlexBoxObj","names","handle"],"mappings":";;;;;AAKA,kC;;;;;AAKA,GAAIA,aAAc,MAAlB;AACA,GAAGC,OAAOC,QAAV,CAAmB;AACf,GAAIC,WAAYF,OAAOC,QAAP,CAAgBE,aAAhB,CAA8B,KAA9B,EAAqCC,KAArD;;AAEAL,YAAc,MAAd;AACA,GAAI,aAAeG,UAAnB,CAA8B;AAC1BH,YAAc,MAAd;AACH,CAFD,IAEO,IAAI,mBAAqBG,UAAzB,CAAoC;AACvCH,YAAc,MAAd;AACH;;;AAGD,GAAI,aAAaM,IAAb,CAAkBL,OAAOM,SAAP,CAAiBC,SAAnC,GAAiD,WAAWF,IAAX,CAAgBL,OAAOM,SAAP,CAAiBC,SAAjC,CAArD,CAAkG;AAC9F,GAAIC,KAAI,kCAAR;AACA,GAAIC,YAAYD,IAAIE,IAAJ,CAASV,OAAOM,SAAP,CAAiBC,SAA1B,CAAhB;AACA,GAAII,SAASF,YAAYA,WAAW,CAAX,CAAzB;AACA,GAAGE,OAAH,CAAW;AACP,GAAIC,YAAWC,SAASF,OAAT,CAAf;AACA,GAAG,CAACG,MAAMF,UAAN,CAAJ,CAAsB;AAClB,GAAGA,WAAa,EAAhB,CAAmB;AACfb,YAAc,MAAd;AACH;AACJ,CAJD,IAIK;AACDA,YAAc,MAAd;AACH;AACJ,CATD,IASK;AACDA,YAAc,MAAd;AACH;;AAEJ;AACJ;;;;;AAKD,GAAIgB,UAAW;AACVC,KAAM,eADI;AAEVC,MAAO,uBAFG;;AAIVC,cAAe,iBAJL;;AAMVC,WAAY,gBANF;;AAQVC,eAAgB,eARN;AASVC,SAAU,IATA;AAUVC,UAAW,gBAVD,CAAf;;;AAaA,GAAIC,WAAY;AACX,WAAY,KADD;AAEX,aAAc,OAFH;AAGX,gBAAiB,SAHN;AAIX,eAAgB,SAJL,CAAhB;;;;;AASC,QAASC,WAAT,CAAoBC,IAApB,CAA0BC,KAA1B,CAAiCC,MAAjC,CAAyC;;;AAGtC,GAAG,CAAC,OAAOtB,IAAP,CAAYsB,OAAOC,OAAnB,CAAJ,CAAgC;AAC7BD,OAAOE,UAAP,CAAoB,IAApB;AACF;AACD,GAAGJ,OAAS,MAAT,EAAmBC,QAAU,CAAhC,CAAkC;;;AAG9B,MAAOC,QAAOF,IAAP,EAAe,MAAtB;AACH;AACD,GAAI1B,cAAgB,MAApB,CAA4B;AACvB,GAAI+B,UAAWP,UAAUG,KAAV,GAAoBA,KAAnC;AACA,GAAIK,SAAUhB,SAASU,IAAT,GAAkBA,IAAhC;AACA,GAAIM,UAAY,iBAAhB,CAAmC;;AAE/BD,SAAWJ,MAAMM,OAAN,CAAc,KAAd,IAAyB,CAAC,CAA1B,CAA8B,YAA9B,CAA6C,UAAxD;;AAEA,GAAIC,KAAMP,MAAMM,OAAN,CAAc,SAAd,IAA6B,CAAC,CAA9B,CAAkC,SAAlC,CAA8C,QAAxD;;AAEAL,OAAOO,kBAAP,CAA4BD,GAA5B;AACH;AACD,MAAON,QAAOI,OAAP,EAAkBD,QAAzB;AACH,CAZF,IAYQ,IAAI/B,cAAgB,MAApB,CAA4B;AAC/B0B,KAAO,sBAAQA,IAAR,GAAiBA,IAAxB;AACA,MAAOE,QAAOF,IAAP,EAAeC,KAAtB;AACH,CAHM,IAGA;AACH,MAAOC,QAAOF,IAAP,EAAeC,KAAtB;AACH;AACJ;;AAED,GAAIS,eAAe;AACfC,MAAOrB,QADQ;AAEfsB,OAAQb,UAFO,CAAnB,C;;;AAKeW,a","file":"fixFlexBox.js","sourceRoot":"/Users/jane/Documents/HaloAI","sourcesContent":["/*\r\n * 修正 flexbox的相关样子，让浏览器能使用不同flexbox规范运行我们的代码\r\n */\r\n\r\n\r\nimport cssName from './cssName'\r\n/**\r\n*http://www.tuicool.com/articles/Afq6Bzq\r\n获取当前浏览器是使用哪一年的flexbox规范\r\n*/\r\nlet flexboxSpec = '2012';\r\nif(global.document){\r\n    let testStyle = global.document.createElement('div').style\r\n\r\n    flexboxSpec = '2009';\r\n    if ('alignSelf' in testStyle) {\r\n        flexboxSpec = '2012'\r\n    } else if ('webkitAlignSelf' in testStyle) {\r\n        flexboxSpec = '2011'\r\n    }\r\n\r\n    // FIXME: Android UCBrowser is cheat(安卓UC检测是2012,实际是2009版本，iosUC正常 2011版本)\r\n    if (/UCBrowser/i.test(global.navigator.userAgent) && /Android/i.test(global.navigator.userAgent)) {\r\n        let exp=/[\\w\\W]*UCBrowser\\/([\\d]*)[\\w\\W]*/\r\n        let versionArr =exp.exec(global.navigator.userAgent);\r\n        let version =versionArr&&versionArr[1];\r\n        if(version){\r\n            let intVersion=parseInt(version);\r\n            if(!isNaN(intVersion)){\r\n                if(intVersion > 10){\r\n                    flexboxSpec = '2012'\r\n                }\r\n            }else{\r\n                flexboxSpec = '2009'\r\n            }\r\n        }else{\r\n            flexboxSpec = '2009'\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n // prefix 2009 spec\r\nlet oldNames = {\r\n     flex: 'WebkitBoxFlex',\r\n     order: 'WebkitBoxOrdinalGroup',\r\n     // https://github.com/postcss/autoprefixer/blob/master/lib/hacks/flex-direction.coffee\r\n     flexDirection: 'WebkitBoxOrient',\r\n     // https://github.com/postcss/autoprefixer/blob/master/lib/hacks/align-items.coffee\r\n     alignItems: 'WebkitBoxAlign',\r\n     // https://github.com/postcss/autoprefixer/blob/master/lib/hacks/justify-content.coffee\r\n     justifyContent: 'WebkitBoxPack',\r\n     flexWrap: null,\r\n     alignSelf: 'WebkitBoxAlign'\r\n }\r\n\r\nlet oldValues = {\r\n     'flex-end': 'end',\r\n     'flex-start': 'start',\r\n     'space-between': 'justify',\r\n     'space-around': 'justify',  //oldValue中没有严格和space-around对应的属性，近似为justify，聊胜于无\r\n\r\n }\r\n\r\n\r\n function fixFlexBox(name, value, result) {\r\n      //如果用户没有使用display:flex来定义容器，那么我们需要在页面创建一个style标签\r\n      //并注册一个类名，加入6种flex样式规则来激活它\r\n    if(!/flex/.test(result.display)){\r\n       result.useFlexbox = true\r\n    }\r\n    if(name === 'flex' && value === 0){\r\n        //RN When flex is 0, the component is sized according to width and height and it is inflexible.\r\n        // 即RN的flex:0 == CSS flex:'none', CSS flex:0 == CSS flex:0 1 0%\r\n        return result[name] = 'none';\r\n    }\r\n    if (flexboxSpec === '2009') {\r\n         let oldValue = oldValues[value] || value\r\n         let oldName = oldNames[name] || name\r\n         if (oldName === 'WebkitBoxOrient') {\r\n             // boxOrient\r\n             oldValue = value.indexOf('row') !== -1 ? 'horizontal' : 'vertical'\r\n             // boxDirection\r\n             let dir = value.indexOf('reverse') !== -1 ? 'reverse' : 'normal'\r\n\r\n             result.WebkitBoxDirection = dir\r\n         }\r\n         return result[oldName] = oldValue\r\n     } else if (flexboxSpec === '2011') {\r\n         name = cssName(name) || name\r\n         return result[name] = value\r\n     } else {\r\n         return result[name] = value\r\n     }\r\n }\r\n\r\n let fixFlexBoxObj= {\r\n     names: oldNames,\r\n     handle: fixFlexBox\r\n }\r\n\r\n export default fixFlexBoxObj\r\n"]}