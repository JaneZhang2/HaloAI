{"version":3,"sources":["node_modules/@ctrip/crnweb/src/react-native/apis/StyleSheet/fixUnit.js"],"names":["runit","rPrefixes","fontSize","global","fontSizeBase","cw_scale","Dimemsions","get","scale","fixUnit","value","name","test","nameArr","replace","split","shift","toLowerCase","join","cssNumber","parseFloat","toFixed","cssShort","val","unit"],"mappings":";;AAEA,wF;AACA,8G;AACA,wD;;;AAGA,GAAIA,OAAQ,yDAAZ;;;AAGA,GAAIC,WAAY,oBAAhB;AACA,GAAIC,UAASC,OAAOC,YAAP,EAAqB,GAAlC;AACA,GAAIC,UAASC,gBAAWC,GAAX,CAAe,QAAf,EAAyBC,KAAtC;;;AAGA,QAASC,QAAT,CAAiBC,KAAjB,CAAwBC,IAAxB,CAA8B;;;AAG1B,GAAI,MAAOD,MAAP,GAAiB,QAArB,CAA+B;;AAE3B,GAAGT,UAAUW,IAAV,CAAeD,IAAf,CAAH,CAAwB;AACpB,GAAIE,SAAUF,KAAKG,OAAL,CAAc,UAAd,CAA0B,KAA1B,EAAiCC,KAAjC,CAAuC,GAAvC,CAAd;AACAF,QAAQG,KAAR;AACAH,QAAQG,KAAR;AACAH,QAAQ,CAAR,EAAaA,QAAQ,CAAR,EAAWI,WAAX,EAAb;AACAN,KAAOE,QAAQK,IAAR,CAAa,EAAb,CAAP;AACH;;;;;AAKD,GAAI,CAACC,2BAAUR,IAAV,CAAD,EAAoBD,MAAQ,CAA5B,EAAiCA,MAAQ,CAA7C,CAAgD;AAC5CA,MAAQ,CAAR;AACH;;;AAGD,GAAI,CAACS,2BAAUR,IAAV,CAAD,EAAoB,MAAOD,MAAP,GAAiB,QAAzC,CAAmD;AAC/C,GAAG,gBAAgBE,IAAhB,CAAqBD,IAArB,GAA4BD,OAAO,CAAtC,CAAwC;;AAEpCA,MAAM,EAAEL,QAAR;AACH;AACD,MAAOe,YAAW,CAAEV,MAAQR,QAAV,EAAqBmB,OAArB,CAA6B,CAA7B,CAAX,EAA8C,KAArD;AACH;;AAEJ;;AAED,GAAIC,sCAASX,IAAT,GAAkB,MAAOD,MAAP,GAAiB,QAAvC,CAAiD;AACzCA,MAAQA,MAAMI,OAAN,CAAcd,KAAd,CAAqB,SAAUuB,GAAV,CAAeC,IAAf,CAAqB;AAC9C,MAAOA,MAAOD,GAAP,CAAaH,WAAW,CAAEG,IAAMrB,QAAR,EAAmBmB,OAAnB,CAA2B,CAA3B,CAAX,EAA4C,KAAhE;AACH,CAFO,CAAR;AAGP;AACD,MAAOX,MAAP;AACH,C;;AAEcD,O","file":"fixUnit.js","sourceRoot":"/Users/jane/Documents/HaloAI","sourcesContent":["\r\n\r\nimport cssNumber from \"./../../modules/react-lib/CSSProperty/isUnitlessNumber\"\r\nimport cssShort from \"./../../modules/react-lib/CSSProperty/shorthandPropertyExpansions\"\r\nimport Dimemsions from \"./../../apis/Dimensions/index.web\";\r\n\r\n\r\nlet runit = /\\d*\\.?\\d+(rem|em|in|cm|mm|pt|pc|px|vh|vw|vmin|vmax|%)*/g\r\n\r\n\r\nlet rPrefixes = /^(Webkit|O|Moz|Ms)/\r\nlet fontSize=global.fontSizeBase||100;\r\nlet cw_scale=Dimemsions.get('window').scale;\r\n\r\n\r\nfunction fixUnit(value, name) {\r\n\r\n\r\n    if (typeof value === 'number') {\r\n        // 如果是WebkitFlex这种形式，恢复原来的模式\r\n        if(rPrefixes.test(name)){\r\n            let nameArr = name.replace( /([A-Z])/g, '-$1').split('-');\r\n            nameArr.shift();\r\n            nameArr.shift();\r\n            nameArr[0] = nameArr[0].toLowerCase();\r\n            name = nameArr.join('');\r\n        }\r\n\r\n\r\n\r\n        // transform less then 1px value to 1px, 0.5 to be 1\r\n        if (!cssNumber[name] && value > 0 && value < 1) {\r\n            value = 1\r\n        }\r\n\r\n        // Add px to numeric values\r\n        if (!cssNumber[name] && typeof value === 'number') {\r\n            if(/border.*Width/.test(name)&&value==1){\r\n\r\n                value=1/cw_scale;\r\n            }\r\n            return parseFloat(((value / fontSize)).toFixed(5)) + 'rem'\r\n        }\r\n\r\n    }\r\n\r\n    if (cssShort[name] && typeof value === 'string') {\r\n            value = value.replace(runit, function (val, unit) {\r\n                return unit ? val : parseFloat(((val / fontSize)).toFixed(5)) + 'rem'\r\n            })\r\n    }\r\n    return value\r\n}\r\n\r\nexport default fixUnit;\r\n"]}