{"version":3,"sources":["node_modules/@ctrip/crnweb/src/react-native/apis/Animated/AnimatedImplementation.js"],"names":["Animated","__getValue","Animation","result","onEnd","__onEnd","AnimatedWithChildren","_children","child","length","__attach","push","index","indexOf","console","warn","splice","__detach","_flush","rootNode","animatedStyles","Set","findAnimatedStyles","node","update","add","__getChildren","forEach","animatedStyle","easeInOut","Easing","inOut","ease","TimingAnimation","config","_toValue","toValue","_easing","easing","_duration","duration","undefined","_delay","delay","__isInteraction","isInteraction","fromValue","onUpdate","__active","_fromValue","_onUpdate","start","__debouncedOnEnd","finished","_startTime","Date","now","_animationFrame","requestAnimationFrame","bind","_timeout","setTimeout","clearTimeout","global","cancelAnimationFrame","DecayAnimation","_deceleration","deceleration","_velocity","velocity","_lastValue","value","Math","exp","abs","withDefault","defaultValue","SpringAnimation","_overshootClamping","overshootClamping","_restDisplacementThreshold","restDisplacementThreshold","_restSpeedThreshold","restSpeedThreshold","_initialVelocity","_lastVelocity","springConfig","bounciness","speed","SpringConfig","fromBouncinessAndSpeed","fromOrigamiTensionAndFriction","tension","friction","_tension","_friction","previousAnimation","_startPosition","_lastPosition","_lastTime","internalState","getInternalState","lastPosition","lastVelocity","lastTime","position","MAX_STEPS","TIMESTEP_MSEC","numSteps","floor","i","step","aVelocity","aAcceleration","tempPosition","tempVelocity","bVelocity","bAcceleration","cVelocity","cAcceleration","dVelocity","dAcceleration","isOvershooting","isVelocity","isDisplacement","_uniqueId","AnimatedValue","_value","_offset","_animation","_listeners","stopAnimation","stop","_updateValue","offset","callback","id","String","stopTracking","AnimatedInterpolation","animation","_tracking","tracking","key","AnimatedValueXY","valueIn","x","y","setValue","setOffset","flattenOffset","jointCallback","addListener","removeListener","left","top","translateX","translateY","parent","_parent","_interpolation","Interpolation","createInterpolation","parentValue","create","__addChild","__removeChild","AnimatedAddition","a","b","_a","_b","AnimatedMultiplication","AnimatedModulo","modulus","_modulus","AnimatedTransform","transforms","_transforms","map","transform","__getAnimatedValue","AnimatedStyle","style","_style","AnimatedProps","props","_props","_callback","createAnimatedComponent","Component","AnimatedComponent","_propsAnimated","instanceOfComponent","setNativeProps","attachProps","nextProps","oldPropsAnimated","isNaN","shadowOpacity","value2","hasFixed","forceUpdate","className","ins","React","AnimatedTracking","animationClass","animationConfig","_animationClass","_animationConfig","animate","multiply","modulo","maybeVectorAnim","anim","configX","configY","aX","aY","parallel","stopTogether","spring","singleValue","singleConfig","track","timing","decay","sequence","animations","current","onComplete","doneCount","hasEnded","idx","cb","endResult","time","stagger","event","argMapping","args","traverse","recMapping","recEvt","mapping","listener","apply","AnimatedDivision","__makeNative","error","type","input","__getNativeTag","divide","AnimatedImplementationObj","Value","ValueXY","__PropsOnlyForTests"],"mappings":"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","file":"AnimatedImplementation.js","sourceRoot":"/Users/jane/Documents/HaloAI","sourcesContent":["\n\n\n'use strict';\n\nimport Easing from './../Easing/Easing.web'\nimport Interpolation from './Interpolation.web'\nimport React from 'react'\nimport SpringConfig from './SpringConfig'\nimport {flatten,fix} from './../StyleSheet/StyleSheet.web'\n\n\nclass Animated {\n    __attach() {}\n    __detach() {}\n    __getValue() {}\n    __getAnimatedValue() { return this.__getValue(); }\n    __addChild(child) {}\n    __removeChild(child) {}\n    __getChildren(){ return []; }\n}\n\n\nclass Animation {\n    __active;\n    __isInteraction;\n    __onEnd;\n    start(\n        fromValue,\n        onUpdate,\n        onEnd,\n        previousAnimation,\n    ){}\n    stop(){}\n    // Helper function for subclasses to make sure onEnd is only called once.\n    __debouncedOnEnd(result) {\n        let onEnd = this.__onEnd;\n        this.__onEnd = null;\n        onEnd && onEnd(result);\n    }\n}\n\nclass AnimatedWithChildren extends Animated {\n    _children;\n\n    constructor() {\n        super();\n        this._children = [];\n    }\n\n    __addChild(child) {\n        if (this._children.length === 0) {\n            this.__attach();\n        }\n        this._children.push(child);\n    }\n\n    __removeChild(child) {\n        let index = this._children.indexOf(child);\n        if (index === -1) {\n            console.warn('Trying to remove a child that doesn\\'t exist');\n            return;\n        }\n        this._children.splice(index, 1);\n        if (this._children.length === 0) {\n            this.__detach();\n        }\n    }\n\n    __getChildren() {\n        return this._children;\n    }\n}\n\n/**\n * Animated works by building a directed acyclic graph of dependencies\n * transparently when you render your Animated components.\n *\n *               new Animated.Value(0)\n *     .interpolate()        .interpolate()    new Animated.Value(1)\n *         opacity               translateY      scale\n *          style                         transform\n *         View#234                         style\n *                                         View#123\n *\n * A) Top Down phase\n * When an Animated.Value is updated, we recursively go down through this\n * graph in order to find leaf nodes: the views that we flag as needing\n * an update.\n *\n * B) Bottom Up phase\n * When a view is flagged as needing an update, we recursively go back up\n * in order to build the new value that it needs. The reason why we need\n * this two-phases process is to deal with composite props such as\n * transform which can receive values from multiple parents.\n */\nfunction _flush(rootNode) {\n    let animatedStyles = new Set();\n    function findAnimatedStyles(node) {\n        if (typeof node.update === 'function') {\n            animatedStyles.add(node);\n        } else {\n            node.__getChildren().forEach(findAnimatedStyles);\n        }\n    }\n    findAnimatedStyles(rootNode);\n    animatedStyles.forEach(animatedStyle => animatedStyle.update());\n}\n\nlet easeInOut = Easing.inOut(Easing.ease);\n\nclass TimingAnimation extends Animation {\n    _startTime;\n    _fromValue;\n    _toValue;\n    _duration;\n    _delay;\n    _easing;\n    _onUpdate;\n    _animationFrame;\n    _timeout;\n\n    constructor(\n        config,\n    ) {\n        super();\n        this._toValue = config.toValue;\n        this._easing = config.easing || easeInOut;\n        this._duration = config.duration !== undefined ? config.duration : 500;\n        this._delay = config.delay || 0;\n        this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    }\n\n    start(\n        fromValue,\n        onUpdate,\n        onEnd\n    ){\n        this.__active = true;\n        this._fromValue = fromValue;\n        this._onUpdate = onUpdate;\n        this.__onEnd = onEnd;\n\n        let start = () => {\n            if (this._duration === 0) {\n                this._onUpdate(this._toValue);\n                this.__debouncedOnEnd({finished: true});\n            } else {\n                this._startTime = Date.now();\n                this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n            }\n        };\n        if (this._delay) {\n            this._timeout = setTimeout(start, this._delay);\n        } else {\n            start();\n        }\n    }\n\n    onUpdate() {\n        let now = Date.now();\n        if (now >= this._startTime + this._duration) {\n            if (this._duration === 0) {\n                this._onUpdate(this._toValue);\n            } else {\n                this._onUpdate(\n                    this._fromValue + this._easing(1) * (this._toValue - this._fromValue)\n                );\n            }\n            this.__debouncedOnEnd({finished: true});\n            return;\n        }\n\n        this._onUpdate(\n            this._fromValue +\n            this._easing((now - this._startTime) / this._duration) *\n            (this._toValue - this._fromValue)\n        );\n        if (this.__active) {\n            this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n        }\n    }\n\n    stop() {\n        this.__active = false;\n        clearTimeout(this._timeout);\n        global.cancelAnimationFrame(this._animationFrame);\n        this.__debouncedOnEnd({finished: false});\n    }\n}\n\n\nclass DecayAnimation extends Animation {\n    _startTime;\n    _lastValue;\n    _fromValue;\n    _deceleration;\n    _velocity;\n    _onUpdate;\n    _animationFrame;\n\n    constructor(\n        config\n    ) {\n        super();\n        this._deceleration = config.deceleration || 0.998;\n        this._velocity = config.velocity;\n        this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    }\n\n    start(fromValue,onUpdate,onEnd) {\n        this.__active = true;\n        this._lastValue = fromValue;\n        this._fromValue = fromValue;\n        this._onUpdate = onUpdate;\n        this.__onEnd = onEnd;\n        this._startTime = Date.now();\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n\n    onUpdate() {\n        let now = Date.now();\n\n        let value = this._fromValue +\n            (this._velocity / (1 - this._deceleration)) *\n            (1 - Math.exp(-(1 - this._deceleration) * (now - this._startTime)));\n\n        this._onUpdate(value);\n\n        if (Math.abs(this._lastValue - value) < 0.1) {\n            this.__debouncedOnEnd({finished: true});\n            return;\n        }\n\n        this._lastValue = value;\n        if (this.__active) {\n            this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n        }\n    }\n\n    stop() {\n        this.__active = false;\n        global.cancelAnimationFrame(this._animationFrame);\n        this.__debouncedOnEnd({finished: false});\n    }\n}\n\n\n\nfunction withDefault(value, defaultValue) {\n    if (value === undefined || value === null) {\n        return defaultValue;\n    }\n    return value;\n}\n\nclass SpringAnimation extends Animation {\n    _overshootClamping;\n    _restDisplacementThreshold;\n    _restSpeedThreshold;\n    _initialVelocity;\n    _lastVelocity;\n    _startPosition;\n    _lastPosition;\n    _fromValue;\n    _toValue;\n    _tension;\n    _friction;\n    _lastTime;\n    _onUpdate;\n    _animationFrame;\n\n    constructor(\n        config\n    ) {\n        super();\n\n        this._overshootClamping = withDefault(config.overshootClamping, false);\n        this._restDisplacementThreshold = withDefault(config.restDisplacementThreshold, 0.001);\n        this._restSpeedThreshold = withDefault(config.restSpeedThreshold, 0.001);\n        this._initialVelocity = config.velocity;\n        this._lastVelocity = withDefault(config.velocity, 0);\n        this._toValue = config.toValue;\n        this.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n\n        let springConfig;\n        if (config.bounciness !== undefined || config.speed !== undefined) {\n\n            springConfig = SpringConfig.fromBouncinessAndSpeed(\n                withDefault(config.bounciness, 8),\n                withDefault(config.speed, 12),\n            );\n        } else {\n            springConfig = SpringConfig.fromOrigamiTensionAndFriction(\n                withDefault(config.tension, 40),\n                withDefault(config.friction, 7),\n            );\n        }\n        this._tension = springConfig.tension;\n        this._friction = springConfig.friction;\n    }\n\n    start(\n        fromValue,\n        onUpdate,\n        onEnd,\n        previousAnimation\n    ) {\n        this.__active = true;\n        this._startPosition = fromValue;\n        this._lastPosition = this._startPosition;\n\n        this._onUpdate = onUpdate;\n        this.__onEnd = onEnd;\n        this._lastTime = Date.now();\n\n        if (previousAnimation instanceof SpringAnimation) {\n            let internalState = previousAnimation.getInternalState();\n            this._lastPosition = internalState.lastPosition;\n            this._lastVelocity = internalState.lastVelocity;\n            this._lastTime = internalState.lastTime;\n        }\n        if (this._initialVelocity !== undefined &&\n            this._initialVelocity !== null) {\n            this._lastVelocity = this._initialVelocity;\n        }\n        this.onUpdate();\n    }\n\n    getInternalState() {\n        return {\n            lastPosition: this._lastPosition,\n            lastVelocity: this._lastVelocity,\n            lastTime: this._lastTime,\n        };\n    }\n\n    onUpdate() {\n        let position = this._lastPosition;\n        let velocity = this._lastVelocity;\n\n        let tempPosition = this._lastPosition;\n        let tempVelocity = this._lastVelocity;\n\n        // If for some reason we lost a lot of frames (e.g. process large payload or\n        // stopped in the debugger), we only advance by 4 frames worth of\n        // computation and will continue on the next frame. It's better to have it\n        // running at faster speed than jumping to the end.\n        let MAX_STEPS = 64;\n        let now = Date.now();\n        if (now > this._lastTime + MAX_STEPS) {\n            now = this._lastTime + MAX_STEPS;\n        }\n\n        // We are using a fixed time step and a maximum number of iterations.\n        // The following post provides a lot of thoughts into how to build this\n        // loop: http://gafferongames.com/game-physics/fix-your-timestep/\n        let TIMESTEP_MSEC = 1;\n        let numSteps = Math.floor((now - this._lastTime) / TIMESTEP_MSEC);\n\n        for (let i = 0; i < numSteps; ++i) {\n            // Velocity is based on seconds instead of milliseconds\n            let step = TIMESTEP_MSEC / 1000;\n\n            // This is using RK4. A good blog post to understand how it works:\n            // http://gafferongames.com/game-physics/integration-basics/\n            let aVelocity = velocity;\n            let aAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n            let tempPosition = position + aVelocity * step / 2;\n            let tempVelocity = velocity + aAcceleration * step / 2;\n\n            let bVelocity = tempVelocity;\n            let bAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n            tempPosition = position + bVelocity * step / 2;\n            tempVelocity = velocity + bAcceleration * step / 2;\n\n            let cVelocity = tempVelocity;\n            let cAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n            tempPosition = position + cVelocity * step / 2;\n            tempVelocity = velocity + cAcceleration * step / 2;\n\n            let dVelocity = tempVelocity;\n            let dAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n            tempPosition = position + cVelocity * step / 2;\n            tempVelocity = velocity + cAcceleration * step / 2;\n\n            let dxdt = (aVelocity + 2 * (bVelocity + cVelocity) + dVelocity) / 6;\n            let dvdt = (aAcceleration + 2 * (bAcceleration + cAcceleration) + dAcceleration) / 6;\n\n            position += dxdt * step;\n            velocity += dvdt * step;\n        }\n\n        this._lastTime = now;\n        this._lastPosition = position;\n        this._lastVelocity = velocity;\n\n        this._onUpdate(position);\n        if (!this.__active) { // a listener might have stopped us in _onUpdate\n            return;\n        }\n\n        // Conditions for stopping the spring animation\n        let isOvershooting = false;\n        if (this._overshootClamping && this._tension !== 0) {\n            if (this._startPosition < this._toValue) {\n                isOvershooting = position > this._toValue;\n            } else {\n                isOvershooting = position < this._toValue;\n            }\n        }\n        let isVelocity = Math.abs(velocity) <= this._restSpeedThreshold;\n        let isDisplacement = true;\n        if (this._tension !== 0) {\n            isDisplacement = Math.abs(this._toValue - position) <= this._restDisplacementThreshold;\n        }\n\n        if (isOvershooting || (isVelocity && isDisplacement)) {\n            if (this._tension !== 0) {\n                // Ensure that we end up with a round value\n                this._onUpdate(this._toValue);\n            }\n\n            this.__debouncedOnEnd({finished: true});\n            return;\n        }\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n\n    stop() {\n        this.__active = false;\n        global.cancelAnimationFrame(this._animationFrame);\n        this.__debouncedOnEnd({finished: false});\n    }\n}\n\n// type ValueListenerCallback = (state: {value: number}) => void;\n\nlet _uniqueId = 1;\n\n/**\n * Standard value for driving animations.  One `Animated.Value` can drive\n * multiple properties in a synchronized fashion, but can only be driven by one\n * mechanism at a time.  Using a new mechanism (e.g. starting a new animation,\n * or calling `setValue`) will stop any previous ones.\n */\nclass AnimatedValue extends AnimatedWithChildren {\n    _value;\n    _offset;\n    _animation;\n    _tracking;\n    _listeners;\n\n    constructor(value) {\n        super();\n        this._value = value;\n        this._offset = 0;\n        this._animation = null;\n        this._listeners = {};\n    }\n\n    __detach() {\n        this.stopAnimation();\n    }\n\n    __getValue() {\n        return this._value + this._offset;\n    }\n\n    /**\n     * Directly set the value.  This will stop any animations running on the value\n     * and update all the bound properties.\n     */\n    setValue(value) {\n        if (this._animation) {\n            this._animation.stop();\n            this._animation = null;\n        }\n        this._updateValue(value);\n    }\n\n    /**\n     * Sets an offset that is applied on top of whatever value is set, whether via\n     * `setValue`, an animation, or `Animated.event`.  Useful for compensating\n     * things like the start of a pan gesture.\n     */\n    setOffset(offset) {\n        this._offset = offset;\n    }\n\n    /**\n     * Merges the offset value into the base value and resets the offset to zero.\n     * The final output of the value is unchanged.\n     */\n    flattenOffset() {\n        this._value += this._offset;\n        this._offset = 0;\n    }\n\n    /**\n     * Adds an asynchronous listener to the value so you can observe updates from\n     * animations.  This is useful because there is no way to\n     * synchronously read the value because it might be driven natively.\n     */\n    addListener(callback) {\n        let id = String(_uniqueId++);\n        this._listeners[id] = callback;\n        return id;\n    }\n\n    removeListener(id) {\n        delete this._listeners[id];\n    }\n\n    removeAllListeners() {\n        this._listeners = {};\n    }\n\n    /**\n     * Stops any running animation or tracking.  `callback` is invoked with the\n     * final value after stopping the animation, which is useful for updating\n     * state to match the animation position with layout.\n     */\n    stopAnimation(callback) {\n        this.stopTracking();\n        this._animation && this._animation.stop();\n        this._animation = null;\n        callback && callback(this.__getValue());\n    }\n\n    /**\n     * Interpolates the value before updating the property, e.g. mapping 0-1 to\n     * 0-10.\n     */\n    interpolate(config) {\n        return new AnimatedInterpolation(this, config);\n    }\n\n    /**\n     * Typically only used internally, but could be used by a custom Animation\n     * class.\n     */\n    animate(animation, callback) {\n        let previousAnimation = this._animation;\n        this._animation && this._animation.stop();\n        this._animation = animation;\n        animation.start(\n            this._value,\n            (value) => {\n                this._updateValue(value);\n            },\n            (result) => {\n                this._animation = null;\n                callback && callback(result);\n            },\n            previousAnimation,\n        );\n    }\n\n    /**\n     * Typically only used internally.\n     */\n    stopTracking() {\n        this._tracking && this._tracking.__detach();\n        this._tracking = null;\n    }\n\n    /**\n     * Typically only used internally.\n     */\n    track(tracking) {\n        this.stopTracking();\n        this._tracking = tracking;\n    }\n\n    _updateValue(value) {\n        this._value = value;\n        _flush(this);\n        for (let key in this._listeners) {\n            this._listeners[key]({value: this.__getValue()});\n        }\n    }\n}\n\n// type ValueXYListenerCallback = (value: {x: number; y: number}) => void;\n\n/**\n * 2D Value for driving 2D animations, such as pan gestures.  Almost identical\n * API to normal `Animated.Value`, but multiplexed.  Contains two regular\n * `Animated.Value`s under the hood.  Example:\n *\n *```javascript\n *  class DraggableView extends React.Component {\n *    constructor(props) {\n *      super(props);\n *      this.state = {\n *        pan: new Animated.ValueXY(), // inits to zero\n *      };\n *      this.state.panResponder = PanResponder.create({\n *        onStartShouldSetPanResponder: () => true,\n *        onPanResponderMove: Animated.event([null, {\n *          dx: this.state.pan.x, // x,y are Animated.Value\n *          dy: this.state.pan.y,\n *        }]),\n *        onPanResponderRelease: () => {\n *          Animated.spring(\n *            this.state.pan,         // Auto-multiplexed\n *            {toValue: {x: 0, y: 0}} // Back to zero\n *          ).start();\n *        },\n *      });\n *    }\n *    render() {\n *      return (\n *        <Animated.View\n *          {...this.state.panResponder.panHandlers}\n *          style={this.state.pan.getLayout()}>\n *          {this.props.children}\n *        </Animated.View>\n *      );\n *    }\n *  }\n *```\n */\nclass AnimatedValueXY extends AnimatedWithChildren {\n    x;\n    y;\n    _listeners;\n\n    constructor(valueIn) {\n        super();\n        let value = valueIn || {x: 0, y: 0};  // @flowfixme: shouldn't need `: any`\n        if (typeof value.x === 'number' && typeof value.y === 'number') {\n            this.x = new AnimatedValue(value.x);\n            this.y = new AnimatedValue(value.y);\n        } else {\n            this.x = value.x;\n            this.y = value.y;\n        }\n        this._listeners = {};\n    }\n\n    setValue(value) {\n        this.x.setValue(value.x);\n        this.y.setValue(value.y);\n    }\n\n    setOffset(offset) {\n        this.x.setOffset(offset.x);\n        this.y.setOffset(offset.y);\n    }\n\n    flattenOffset(){\n        this.x.flattenOffset();\n        this.y.flattenOffset();\n    }\n\n    __getValue() {\n        return {\n            x: this.x.__getValue(),\n            y: this.y.__getValue(),\n        };\n    }\n\n    stopAnimation(callback){\n        this.x.stopAnimation();\n        this.y.stopAnimation();\n        callback && callback(this.__getValue());\n    }\n\n    addListener(callback) {\n        let id = String(_uniqueId++);\n        let jointCallback = ({value}) => {\n            callback(this.__getValue());\n        };\n        this._listeners[id] = {\n            x: this.x.addListener(jointCallback),\n            y: this.y.addListener(jointCallback),\n        };\n        return id;\n    }\n\n    removeListener(id) {\n        this.x.removeListener(this._listeners[id].x);\n        this.y.removeListener(this._listeners[id].y);\n        delete this._listeners[id];\n    }\n\n    /**\n     * Converts `{x, y}` into `{left, top}` for use in style, e.g.\n     *\n     *```javascript\n     *  style={this.state.anim.getLayout()}\n     *```\n     */\n    getLayout() {\n        return {\n            left: this.x,\n            top: this.y,\n        };\n    }\n\n    /**\n     * Converts `{x, y}` into a useable translation transform, e.g.\n     *\n     *```javascript\n     *  style={{\n   *    transform: this.state.anim.getTranslateTransform()\n   *  }}\n     *```\n     */\n    getTranslateTransform() {\n        return [\n            {translateX: this.x},\n            {translateY: this.y}\n        ];\n    }\n}\n\nclass AnimatedInterpolation extends AnimatedWithChildren {\n    _parent;\n    _interpolation;\n\n    constructor(parent, config) {\n        super();\n        this._parent = parent;\n        this._interpolation = Interpolation.createInterpolation(config);\n    }\n\n    __getValue() {\n        let parentValue = this._parent.__getValue();\n\n        return this._interpolation(parentValue);\n    }\n\n    interpolate(config) {\n        return new AnimatedInterpolation(this, Interpolation.create(config));\n    }\n\n    __attach() {\n        this._parent.__addChild(this);\n    }\n\n    __detach() {\n        this._parent.__removeChild(this);\n    }\n}\n\nclass AnimatedAddition extends AnimatedWithChildren {\n    _a;\n    _b;\n\n    constructor(a, b) {\n        super();\n        this._a = a;\n        this._b = b;\n    }\n\n    __getValue() {\n        return this._a.__getValue() + this._b.__getValue();\n    }\n\n    interpolate(config) {\n        return new AnimatedInterpolation(this, config);\n    }\n\n    __attach() {\n        this._a.__addChild(this);\n        this._b.__addChild(this);\n    }\n\n    __detach() {\n        this._a.__removeChild(this);\n        this._b.__removeChild(this);\n    }\n}\n\nclass AnimatedMultiplication extends AnimatedWithChildren {\n    _a;\n    _b;\n\n    constructor(a, b) {\n        super();\n        this._a = a;\n        this._b = b;\n    }\n\n    __getValue() {\n        return this._a.__getValue() * this._b.__getValue();\n    }\n\n    interpolate(config) {\n        return new AnimatedInterpolation(this, config);\n    }\n\n    __attach() {\n        this._a.__addChild(this);\n        this._b.__addChild(this);\n    }\n\n    __detach() {\n        this._a.__removeChild(this);\n        this._b.__removeChild(this);\n    }\n}\n\n\nclass AnimatedModulo extends AnimatedWithChildren {\n    _a;\n    _modulus;\n\n    constructor(a, modulus) {\n        super();\n        this._a = a;\n        this._modulus = modulus;\n    }\n\n    __getValue() {\n        return (this._a.__getValue() % this._modulus + this._modulus) % this._modulus;\n    }\n\n    interpolate(config) {\n        return new AnimatedInterpolation(this, config);\n    }\n\n    __attach() {\n        this._a.__addChild(this);\n    }\n\n    __detach() {\n        this._a.__removeChild(this);\n    }\n}\n\nclass AnimatedTransform extends AnimatedWithChildren {\n    _transforms;\n\n    constructor(transforms) {\n        super();\n        this._transforms = transforms;\n    }\n\n    __getValue() {\n        if('string'===typeof this._transforms){\n            return this._transforms;\n        }\n\n        return this._transforms.map(transform => {\n            let result = {};\n            for (let key in transform) {\n                let value = transform[key];\n                if (value instanceof Animated) {\n                    result[key] = value.__getValue();\n                } else {\n                    result[key] = value;\n                }\n            }\n            return result;\n        });\n    }\n\n    __getAnimatedValue() {\n        return this._transforms.map(transform => {\n            let result = {};\n            for (let key in transform) {\n                let value = transform[key];\n                if (value instanceof Animated) {\n                    result[key] = value.__getAnimatedValue();\n                } else {\n                    // All transform components needed to recompose matrix\n                    result[key] = value;\n                }\n            }\n            return result;\n        });\n    }\n\n    __attach() {\n        this._transforms&&this._transforms.forEach&&this._transforms.forEach(transform => {\n            for (let key in transform) {\n                let value = transform[key];\n                if (value instanceof Animated) {\n                    value.__addChild(this);\n                }\n            }\n        });\n    }\n\n    __detach() {\n        this._transforms&&this._transforms.forEach&&this._transforms.forEach(transform => {\n            for (let key in transform) {\n                let value = transform[key];\n                if (value instanceof Animated) {\n                    value.__removeChild(this);\n                }\n            }\n        });\n    }\n}\n\nclass AnimatedStyle extends AnimatedWithChildren {\n    _style;\n\n    constructor(style) {\n        super();\n        style = flatten(style) || {};\n        if (style.transform) {\n            style = {\n                ...style,\n                transform: new AnimatedTransform(style.transform),\n            };\n        }\n        this._style = style;\n    }\n\n    __getValue() {\n        let style = {};\n        for (let key in this._style) {\n            let value = this._style[key];\n            if (value instanceof Animated) {\n                style[key] = value.__getValue();\n            } else {\n                style[key] = value;\n            }\n\n        }\n\n        return style;\n    }\n\n    __getAnimatedValue() {\n        let style = {};\n        for (let key in this._style) {\n            let value = this._style[key];\n            if (value instanceof Animated) {\n                style[key] = value.__getAnimatedValue();\n            }\n        }\n        return style;\n    }\n\n    __attach() {\n        for (let key in this._style) {\n            let value = this._style[key];\n            if (value instanceof Animated) {\n                value.__addChild(this);\n            }\n        }\n    }\n\n    __detach() {\n        for (let key in this._style) {\n            let value = this._style[key];\n            if (value instanceof Animated) {\n                value.__removeChild(this);\n            }\n        }\n    }\n}\n\nclass AnimatedProps extends Animated {\n    _props;\n    _callback;\n\n    constructor(\n        props,\n        callback\n    ) {\n        super();\n        if (props.style) {\n            props = {\n                ...props,\n                style: new AnimatedStyle(props.style),\n            };\n        }\n        this._props = props;\n        this._callback = callback;\n        this.__attach();\n    }\n\n    __getValue() {\n        let props = {};\n        for (let key in this._props) {\n            let value = this._props[key];\n            if (value instanceof Animated) {\n                props[key] = value.__getValue();\n            } else {\n                props[key] = value;\n            }\n        }\n        return props;\n    }\n\n    __getAnimatedValue() {\n        let props = {};\n        for (let key in this._props) {\n            let value = this._props[key];\n            if (value instanceof Animated) {\n                props[key] = value.__getAnimatedValue();\n            }\n        }\n        return props;\n    }\n\n    __attach() {\n        for (let key in this._props) {\n            let value = this._props[key];\n            if (value instanceof Animated) {\n                value.__addChild(this);\n            }\n        }\n    }\n\n    __detach() {\n        for (let key in this._props) {\n            let value = this._props[key];\n            if (value instanceof Animated) {\n                value.__removeChild(this);\n            }\n        }\n    }\n\n    update() {\n        this._callback();\n    }\n}\n\nfunction createAnimatedComponent(Component) {\n\n    class AnimatedComponent extends React.Component {\n        constructor(props) {\n            super(props);\n        }\n        _propsAnimated;\n\n        componentWillUnmount() {\n            this._propsAnimated && this._propsAnimated.__detach();\n        }\n\n        setNativeProps(props) {\n\n            this.instanceOfComponent&&this.instanceOfComponent.setNativeProps(props);\n        }\n\n        componentWillMount() {\n            this.attachProps(this.props);\n\n        }\n\n        attachProps(nextProps) {\n            let oldPropsAnimated = this._propsAnimated;\n\n            // The system is best designed when setNativeProps is implemented. It is\n            // able to avoid re-rendering and directly set the attributes that\n            // changed. However, setNativeProps can only be implemented on leaf\n            // native components. If you want to animate a composite component, you\n            // need to re-render it. In this case, we have a fallback that uses\n            // forceUpdate.\n            let callback = () => {\n                if (this.instanceOfComponent&&this.instanceOfComponent.setNativeProps) {\n                    let value = this._propsAnimated.__getAnimatedValue();\n                    //fix shadowOpacity bug\n                    if(value.style&&!isNaN(value.style.shadowOpacity)){\n                        let value2=this._propsAnimated.__getValue();\n                        value.style=Object.assign(value2.style,value.style);\n                        value.style.hasFixed=false;\n                    }\n                    this.instanceOfComponent.setNativeProps(value);\n                } else {\n                    this.forceUpdate();\n                }\n\n            };\n\n            this._propsAnimated = new AnimatedProps(\n                nextProps,\n                callback,\n            );\n\n            // When you call detach, it removes the element from the parent list\n            // of children. If it goes to 0, then the parent also detaches itself\n            // and so on.\n            // An optimization is to attach the new elements and THEN detach the old\n            // ones instead of detaching and THEN attaching.\n            // This way the intermediate state isn't to go to 0 and trigger\n            // this expensive recursive detaching to then re-attach everything on\n            // the very next operation.\n            oldPropsAnimated && oldPropsAnimated.__detach();\n        }\n\n        componentWillReceiveProps(nextProps) {\n            this.attachProps(nextProps);\n        }\n\n        render() {\n            let value = this._propsAnimated.__getValue();\n            if(value.style){\n                value.style=fix(value.style);\n            }\n            value.className = 'animationComponent ' + (value.className || '')\n            return (\n                <Component\n                    {...value}\n                    ref={(ins)=>{this.instanceOfComponent=ins}}\n                />\n            );\n        }\n\n        // A third party library can use getNode()\n        // to get the node reference of the decorated component\n        getNode() {\n            return this.instanceOfComponent;\n        }\n    }\n    AnimatedComponent.propTypes = {\n    };\n\n    return AnimatedComponent;\n}\n\nclass AnimatedTracking extends Animated {\n    _value;\n    _parent;\n    _callback;\n    _animationConfig;\n    _animationClass;\n\n    constructor(\n        value,\n        parent,\n        animationClass,\n        animationConfig,\n        callback\n    ) {\n        super();\n        this._value = value;\n        this._parent = parent;\n        this._animationClass = animationClass;\n        this._animationConfig = animationConfig;\n        this._callback = callback;\n        this.__attach();\n    }\n\n    __getValue() {\n        return this._parent.__getValue();\n    }\n\n    __attach() {\n        this._parent.__addChild(this);\n    }\n\n    __detach() {\n        this._parent.__removeChild(this);\n    }\n\n    update() {\n        this._value.animate(new this._animationClass({\n            ...this._animationConfig,\n            toValue: (this._animationConfig.toValue).__getValue(),\n        }), this._callback);\n    }\n}\n//\n// type CompositeAnimation = {\n//   start: (callback?: ?EndCallback) => void;\n//   stop: () => void;\n// };\n\nlet add = function(\n    a,\n    b\n) {\n    return new AnimatedAddition(a, b);\n};\n\nlet multiply = function(\n    a,\n    b\n) {\n    return new AnimatedMultiplication(a, b);\n};\n\nlet modulo = function(\n    a,\n    modulus\n) {\n    return new AnimatedModulo(a, modulus);\n};\n\n\n\nlet maybeVectorAnim = function(\n    value,\n    config,\n    anim\n) {\n    if (value instanceof AnimatedValueXY) {\n        let configX = {...config};\n        let configY = {...config};\n        for (let key in config) {\n            let {x, y} = config[key];\n            if (x !== undefined && y !== undefined) {\n                configX[key] = x;\n                configY[key] = y;\n            }\n        }\n        let aX = anim((value).x, configX);\n        let aY = anim((value).y, configY);\n        // We use `stopTogether: false` here because otherwise tracking will break\n        // because the second animation will get stopped before it can update.\n        return parallel([aX, aY], {stopTogether: false});\n    }\n    return null;\n};\n\nlet spring = function(\n    value,\n    config\n) {\n    return maybeVectorAnim(value, config, spring) || {\n        start: function(callback) {\n            let singleValue = value;\n            let singleConfig = config;\n            singleValue.stopTracking();\n            if (config.toValue instanceof Animated) {\n                singleValue.track(new AnimatedTracking(\n                    singleValue,\n                    config.toValue,\n                    SpringAnimation,\n                    singleConfig,\n                    callback\n                ));\n            } else {\n                singleValue.animate(new SpringAnimation(singleConfig), callback);\n            }\n        },\n\n        stop: function() {\n            value.stopAnimation();\n        },\n    };\n};\n\nlet timing = function(\n    value,\n    config,\n) {\n    return maybeVectorAnim(value, config, timing) || {\n        start: function(callback) {\n            let singleValue = value;\n            let singleConfig = config;\n            singleValue.stopTracking();\n            if (config.toValue instanceof Animated) {\n                singleValue.track(new AnimatedTracking(\n                    singleValue,\n                    config.toValue,\n                    TimingAnimation,\n                    singleConfig,\n                    callback\n                ));\n            } else {\n                singleValue.animate(new TimingAnimation(singleConfig), callback);\n            }\n        },\n\n        stop: function() {\n            value.stopAnimation();\n        },\n    };\n};\n\nlet decay = function(\n    value,\n    config,\n) {\n    return maybeVectorAnim(value, config, decay) || {\n        start: function(callback) {\n            let singleValue = value;\n            let singleConfig = config;\n            singleValue.stopTracking();\n            singleValue.animate(new DecayAnimation(singleConfig), callback);\n        },\n\n        stop: function() {\n            value.stopAnimation();\n        },\n    };\n};\n\nlet sequence = function(\n    animations\n) {\n    let current = 0;\n    return {\n        start: function(callback) {\n            let onComplete = function(result) {\n                if (!result.finished) {\n                    callback && callback(result);\n                    return;\n                }\n\n                current++;\n\n                if (current === animations.length) {\n                    callback && callback(result);\n                    return;\n                }\n\n                animations[current].start(onComplete);\n            };\n\n            if (animations.length === 0) {\n                callback && callback({finished: true});\n            } else {\n                animations[current].start(onComplete);\n            }\n        },\n\n        stop: function() {\n            if (current < animations.length) {\n                animations[current].stop();\n            }\n        }\n    };\n};\n\n// type ParallelConfig = {\n//   stopTogether?: bool; // If one is stopped, stop all.  default: true\n// }\nlet parallel = function(\n    animations,\n    config\n) {\n    let doneCount = 0;\n    // Make sure we only call stop() at most once for each animation\n    let hasEnded = {};\n    let stopTogether = !(config && config.stopTogether === false);\n\n    let result = {\n        start: function(callback) {\n            if (doneCount === animations.length) {\n                callback && callback({finished: true});\n                return;\n            }\n\n            animations.forEach((animation, idx) => {\n                let cb = function(endResult) {\n                    hasEnded[idx] = true;\n                    doneCount++;\n                    if (doneCount === animations.length) {\n                        doneCount = 0;\n                        callback && callback(endResult);\n                        return;\n                    }\n\n                    if (!endResult.finished && stopTogether) {\n                        result.stop();\n                    }\n                };\n\n                if (!animation) {\n                    cb({finished: true});\n                } else {\n                    animation.start(cb);\n                }\n            });\n        },\n\n        stop: function() {\n            animations.forEach((animation, idx) => {\n                !hasEnded[idx] && animation.stop();\n                hasEnded[idx] = true;\n            });\n        }\n    };\n\n    return result;\n};\n\nlet delay = function(time) {\n    // Would be nice to make a specialized implementation\n    return timing(new AnimatedValue(0), {toValue: 0, delay: time, duration: 0});\n};\n\nlet stagger = function(\n    time,\n    animations\n) {\n    return parallel(animations.map((animation, i) => {\n        return sequence([\n            delay(time * i),\n            animation,\n        ]);\n    }));\n};\n\n// type Mapping = {[key: string]: Mapping} | AnimatedValue;\n//\n// type EventConfig = {listener?: ?Function};\nlet event = function(\n    argMapping,\n    config\n){\n    return function(...args) {\n        let traverse = function(recMapping, recEvt, key) {\n            if (typeof recEvt === 'number') {\n\n                recMapping.setValue(recEvt);\n                return;\n            }\n\n            for (let key in recMapping) {\n                // filter\n                if (key === \"contentOffset\" && !(\"contentOffset\" in recEvt)) continue\n                traverse(recMapping[key], recEvt[key], key);\n            }\n        };\n        argMapping.forEach((mapping, idx) => {\n            traverse(mapping, args[idx], 'arg' + idx);\n        });\n        if (config && config.listener) {\n            config.listener.apply(null, args);\n        }\n    };\n};\n\n\nclass AnimatedDivision extends AnimatedWithChildren {\n    _a;\n    _b;\n\n    constructor(a, b) {\n        super();\n        this._a = typeof a === 'number' ? new AnimatedValue(a) : a;\n        this._b = typeof b === 'number' ? new AnimatedValue(b) : b;\n    }\n\n    __makeNative() {\n        this._a.__makeNative();\n        this._b.__makeNative();\n        super.__makeNative();\n    }\n\n    __getValue(){\n        const a = this._a.__getValue();\n        const b = this._b.__getValue();\n        if (b === 0) {\n            console.error('Detected division by zero in AnimatedDivision');\n        }\n        return a / b;\n    }\n\n    interpolate(config){\n        return new AnimatedInterpolation(this, config);\n    }\n\n    __attach(){\n        this._a.__addChild(this);\n        this._b.__addChild(this);\n    }\n\n    __detach(){\n        this._a.__removeChild(this);\n        this._b.__removeChild(this);\n        super.__detach();\n    }\n\n    __getNativeConfig() {\n        return {\n            type: 'division',\n            input: [this._a.__getNativeTag(), this._b.__getNativeTag()],\n        };\n    }\n}\n\nconst divide = function(\n    a,\n    b,\n){\n    return new AnimatedDivision(a, b);\n};\n\n\n/**\n * Animations are an important part of modern UX, and the `Animated`\n * library is designed to make them fluid, powerful, and easy to build and\n * maintain.\n *\n * The simplest workflow is to create an `Animated.Value`, hook it up to one or\n * more style attributes of an animated component, and then drive updates either\n * via animations, such as `Animated.timing`, or by hooking into gestures like\n * panning or scrolling via `Animated.event`.  `Animated.Value` can also bind to\n * props other than style, and can be interpolated as well.  Here is a basic\n * example of a container view that will fade in when it's mounted:\n *\n *```javascript\n *  class FadeInView extends React.Component {\n *    constructor(props) {\n *      super(props);\n *      this.state = {\n *        fadeAnim: new Animated.Value(0), // init opacity 0\n *      };\n *    }\n *    componentDidMount() {\n *      Animated.timing(          // Uses easing functions\n *        this.state.fadeAnim,    // The value to drive\n *        {toValue: 1},           // Configuration\n *      ).start();                // Don't forget start!\n *    }\n *    render() {\n *      return (\n *        <Animated.View          // Special animatable View\n *          style={{opacity: this.state.fadeAnim}}> // Binds\n *          {this.props.children}\n *        </Animated.View>\n *      );\n *    }\n *  }\n *```\n *\n * Note that only animatable components can be animated.  `View`, `Text`, and\n * `Image` are already provided, and you can create custom ones with\n * `createAnimatedComponent`.  These special components do the magic of binding\n * the animated values to the properties, and do targeted native updates to\n * avoid the cost of the react render and reconciliation process on every frame.\n * They also handle cleanup on unmount so they are safe by default.\n *\n * Animations are heavily configurable.  Custom and pre-defined easing\n * functions, delays, durations, decay factors, spring constants, and more can\n * all be tweaked depending on the type of animation.\n *\n * A single `Animated.Value` can drive any number of properties, and each\n * property can be run through an interpolation first.  An interpolation maps\n * input ranges to output ranges, typically using a linear interpolation but\n * also supports easing functions.  By default, it will extrapolate the curve\n * beyond the ranges given, but you can also have it clamp the output value.\n *\n * For example, you may want to think about your `Animated.Value` as going from\n * 0 to 1, but animate the position from 150px to 0px and the opacity from 0 to\n * 1. This can easily be done by modifying `style` in the example above like so:\n *\n *```javascript\n *  style={{\n *    opacity: this.state.fadeAnim, // Binds directly\n *    transform: [{\n *      translateY: this.state.fadeAnim.interpolate({\n *        inputRange: [0, 1],\n *        outputRange: [150, 0]  // 0 : 150, 0.5 : 75, 1 : 0\n *      }),\n *    }],\n *  }}>\n *```\n *\n * Animations can also be combined in complex ways using composition functions\n * such as `sequence` and `parallel`, and can also be chained together simply\n * by setting the `toValue` of one animation to be another `Animated.Value`.\n *\n * `Animated.ValueXY` is handy for 2D animations, like panning, and there are\n * other helpful additions like `setOffset` and `getLayout` to aid with typical\n * interaction patterns, like drag-and-drop.\n *\n * You can see more example usage in `AnimationExample.js`, the Gratuitous\n * Animation App, and [Animations documentation guide](http://facebook.github.io/react-native/docs/animations.html).\n *\n * Note that `Animated` is designed to be fully serializable so that animations\n * can be run in a high performance way, independent of the normal JavaScript\n * event loop. This does influence the API, so keep that in mind when it seems a\n * little trickier to do something compared to a fully synchronous system.\n * Checkout `Animated.Value.addListener` as a way to work around some of these\n * limitations, but use it sparingly since it might have performance\n * implications in the future.\n */\n\nlet AnimatedImplementationObj={\n    /**\n     * Standard value class for driving animations.  Typically initialized with\n     * `new Animated.Value(0);`\n     */\n\n\n    /**\n     * @class Value\n     * @description  new Animated.Value(0) \n     */\n    Value: AnimatedValue,\n    /**\n     * 2D value class for driving 2D animations, such as pan gestures.\n     */\n\n\n    /**\n     * @class ValueXY\n     * @description \n     */\n    ValueXY: AnimatedValueXY,\n\n    /**\n     * Animates a value from an initial velocity to zero based on a decay\n     * coefficient.\n     */\n    decay,\n    /**\n     * Animates a value along a timed easing curve.  The `Easing` module has tons\n     * of pre-defined curves, or you can use your own function.\n     */\n    timing,\n    /**\n     * Spring animation based on Rebound and Origami.  Tracks velocity state to\n     * create fluid motions as the `toValue` updates, and can be chained together.\n     */\n    spring,\n\n    /**\n     * Creates a new Animated value composed from two Animated values added\n     * together.\n     */\n    add,\n\n    divide,\n    /**\n     * Creates a new Animated value composed from two Animated values multiplied\n     * together.\n     */\n    multiply,\n\n    modulo,\n\n    /**\n     * Starts an animation after the given delay.\n     */\n    delay,\n    /**\n     * Starts an array of animations in order, waiting for each to complete\n     * before starting the next.  If the current running animation is stopped, no\n     * following animations will be started.\n     */\n    sequence,\n    /**\n     * Starts an array of animations all at the same time.  By default, if one\n     * of the animations is stopped, they will all be stopped.  You can override\n     * this with the `stopTogether` flag.\n     */\n    parallel,\n    /**\n     * Array of animations may run in parallel (overlap), but are started in\n     * sequence with successive delays.  Nice for doing trailing effects.\n     */\n    stagger,\n\n    /**\n     *  Takes an array of mappings and extracts values from each arg accordingly,\n     *  then calls `setValue` on the mapped outputs.  e.g.\n     *\n     *```javascript\n     *  onScroll={Animated.event(\n   *    [{nativeEvent: {contentOffset: {x: this._scrollX}}}]\n   *    {listener},          // Optional async listener\n   *  )\n   *  ...\n   *  onPanResponderMove: Animated.event([\n   *    null,                // raw event arg ignored\n   *    {dx: this._panX},    // gestureState arg\n   *  ]),\n   *```\n   */\n    event,\n\n    /**\n     * Make any React component Animatable.  Used to create `Animated.View`, etc.\n     */\n    createAnimatedComponent,\n\n    __PropsOnlyForTests: AnimatedProps,\n};\n\nexport default AnimatedImplementationObj\n"]}